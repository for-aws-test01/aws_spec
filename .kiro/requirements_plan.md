# AWSomeShop 需求规划文档

## 项目概述
构建一个名为 AWSomeShop 的内部员工福利电商网站，通过 MVP 验证员工积分兑换系统的商业模式。

## 需求收集步骤

### 第一阶段：核心业务理解
- [x] 1. 明确用户角色和权限
- [x] 2. 理解积分系统机制
- [x] 3. 确定产品管理流程
- [x] 4. 明确兑换流程和规则

### 第二阶段：功能细节澄清
- [x] 5. 员工功能详细需求
- [x] 6. 管理员功能详细需求
- [x] 7. 系统集成需求

### 第三阶段：非功能性需求
- [x] 8. 性能和可扩展性需求
- [x] 9. 安全性和合规性需求
- [x] 10. 用户体验需求

### 第四阶段：技术约束
- [x] 11. 技术栈和平台选择
- [x] 12. 数据存储和管理

---

## 需要澄清的问题

### 关于用户角色和权限

**[Question 1.1]** 系统中是否只有"员工"和"管理员"两种角色？是否需要其他角色（如超级管理员、审计员等）？

**[Answer]**不需要

**[Question 1.2]** 员工是否需要注册账号，还是通过现有的企业身份系统（如 SSO、LDAP）登录？

**[Answer]**通过管理员添加账号密码，但是员工有权限去修改密码

**[Question 1.3]** 管理员权限是否需要分级？例如，是否有些管理员只能管理产品，有些只能管理积分？

**[Answer]**管理员可以设置职位，职位对应各种权限，权限按功能一一对应

---

### 关于积分系统

**[Question 2.1]** "AWSome积分"的初始发放规则是什么？（例如：新员工入职时获得多少积分？）

**[Answer]**新员工入职时获得1000积分，剩余积分管理有管理员控制

**[Question 2.2]** 积分是否有有效期？是否会过期？

**[Answer]**积分无有效期，永久有效

**[Question 2.3]** 积分是否可以退回？例如，员工兑换产品后取消订单，积分如何处理？

**[Answer]**可以退回；取消订单，积分退回

**[Question 2.4]** 积分的最小单位是什么？（例如：1积分、0.1积分？）

**[Answer]**1积分

**[Question 2.5]** 是否需要积分变动的审计日志？（谁在什么时候给谁发放/扣除了多少积分？）

**[Answer]**需要日志变动日志

---

### 关于产品管理

**[Question 3.1]** 产品信息包括哪些字段？（例如：名称、描述、图片、所需积分、库存数量、分类等？）

**[Answer]**名称、描述、图片、所需积分、分类

**[Question 3.2]** 产品是否有库存限制？如果有，库存不足时如何处理兑换请求？

**[Answer]**无需库存问题

**[Question 3.3]** 产品是否需要分类或标签功能，方便员工浏览？

**[Answer]**需要

**[Question 3.4]** 产品是否可以上架/下架？下架的产品员工是否还能看到？

**[Answer]**需要，下架的产品员工可以看到，无法兑换

**[Question 3.5]** 是否需要产品搜索功能？

**[Answer]**不需要

---

### 关于兑换流程

**[Question 4.1]** 员工兑换产品后，是否需要填写收货地址等信息？

**[Answer]**不需要

**[Question 4.2]** 兑换是否需要审批流程，还是立即扣除积分并确认兑换？

**[Answer]**需要审核，审核动作就相当于核销

**[Question 4.3]** 兑换后是否有订单状态跟踪？（例如：待发货、已发货、已完成、已取消等）

**[Answer]**需要，待核销、已核销、已取消、已拒绝

**[Question 4.4]** 员工是否可以取消兑换订单？如果可以，在什么状态下可以取消？

**[Answer]**可以取消订单，待核销状态可以取消订单

**[Question 4.5]** 兑换历史需要保留多久？是否需要导出功能？

**[Answer]**永久保留，不需要导出功能

---

### 关于员工功能细节

**[Question 5.1]** 员工浏览产品时，是否需要筛选和排序功能？（例如：按积分从低到高、按分类筛选等）

**[Answer]**不需要

**[Question 5.2]** 员工查看积分余额时，是否需要显示积分明细（获得/消费记录）？

**[Answer]**显示

**[Question 5.3]** 员工是否可以一次兑换多个产品？

**[Answer]**不可以

**[Question 5.4]** 员工是否需要收藏或愿望清单功能？

**[Answer]**不需要

---

### 关于管理员功能细节

**[Question 6.1]** 管理员管理积分时，是否需要批量操作功能？（例如：给所有员工发放节日积分）

**[Answer]**支持

**[Question 6.2]** 管理员是否需要查看统计报表？（例如：积分发放总量、兑换最多的产品、员工活跃度等）

**[Answer]**不需要

**[Question 6.3]** 管理员配置产品时，是否需要批量导入/导出功能？

**[Answer]**不需要

**[Question 6.4]** 管理员是否需要查看所有员工的兑换订单？

**[Answer]**需要

---

### 关于非功能性需求

**[Question 7.1]** 预期的用户规模是多少？（例如：100人、1000人、10000人？）

**[Answer]**1000人

**[Question 7.2]** 系统的可用性要求是什么？（例如：7x24小时，还是工作时间可用即可？）

**[Answer]**7x24小时

**[Question 7.3]** 是否需要支持移动设备访问？是否需要响应式设计？

**[Answer]**不需要

**[Question 7.4]** 数据安全性要求如何？是否需要加密存储敏感信息？

**[Answer]**不需要

**[Question 7.5]** 是否需要符合特定的合规要求？（例如：GDPR、数据本地化等）

**[Answer]**不需要

**[Question 7.6]** 系统的响应时间要求是什么？（例如：页面加载时间、搜索响应时间等）

**[Answer]**页面加载时间小于5s

---

### 关于技术约束

**[Question 8.1]** 是否有首选的技术栈或平台？（例如：AWS、Azure、本地部署等）

**[Answer]**本地部署

**[Question 8.2]** 是否需要与现有系统集成？（例如：HR系统、邮件系统、通知系统等）

**[Answer]**不需要

**[Question 8.3]** 是否有预算或资源限制？

**[Answer]**没有限制

---

### 追加问题 - 第一轮

#### 关于管理员权限系统

**[Question 9.1]** 您提到"管理员可以设置职位，职位对应各种权限"。请明确系统中有哪些具体的权限项？例如：
- 管理产品（增删改查）
- 管理员工账号（增删改查）
- 发放/扣除积分
- 审核兑换订单
- 查看积分日志
- 管理职位和权限
- 其他？

**[Answer]**上述全部功能

**[Question 9.2]** 谁有权限创建和管理"职位"？是否需要一个超级管理员角色，还是所有管理员都可以？

**[Answer]**拥有管理管理员权限的管理员

**[Question 9.3]** 管理员账号如何创建？是否也由其他管理员创建，还是有特殊的初始化流程？

**[Answer]**首先创建一个admin全权限的管理员，后续管理员由admin创建

---

#### 关于兑换审核流程

**[Question 10.1]** 您提到"需要审核，审核动作就相当于核销"。请明确：
- 谁负责审核兑换订单？（特定权限的管理员？）
- 审核时需要查看哪些信息？
- 拒绝订单时是否需要填写拒绝原因？

**[Answer]**拥有对应权限的管理员负责审核兑换订单；审核时需要查看兑换人与兑换产品信息；拒绝订单时需要填写拒绝原因；核销成功也需要填写信息

**[Question 10.2]** 员工提交兑换申请后，是否需要通知功能？（例如：通知员工订单状态变更）

**[Answer]**不需要

**[Question 10.3]** 管理员是否需要看到待审核订单的列表或提醒？

**[Answer]**需要待审核列表，不需要提醒

---

#### 关于员工账号管理

**[Question 11.1]** 管理员添加员工账号时，需要填写哪些信息？（例如：姓名、工号、部门、邮箱、初始密码等）

**[Answer]**姓名、工号、部门、岗位、邮箱、手机号、入职时间、初始密码、状态

**[Question 11.2]** 员工忘记密码时如何处理？是否需要密码重置功能？由谁来重置？

**[Answer]**需要密码重置功能，管理员才能重置密码

**[Question 11.3]** 员工离职后，账号如何处理？是否需要禁用/删除功能？剩余积分如何处理？

**[Answer]**账号禁用，积分不做处理

---

#### 关于积分管理细节

**[Question 12.1]** 管理员批量发放积分时，是否需要填写发放原因？（例如：年终奖励、节日福利等）

**[Answer]**需要填写发放原因

**[Question 12.2]** 管理员扣除积分时，是否需要员工确认或审批？

**[Answer]**不需要员工确认

**[Question 12.3]** 积分日志需要记录哪些信息？（例如：操作时间、操作人、员工、积分变动数量、变动原因、变动类型等）

**[Answer]**操作时间、操作人、员工、积分变动数量、变动原因、变动类型

**[Question 12.4]** 员工和管理员是否都可以查看积分日志？查看范围是否不同？

**[Answer]**员工可以查看自己的积分变动日志，管理员可以查看所有的积分变动日志

---

#### 关于产品分类

**[Question 13.1]** 产品分类是否需要多级分类？（例如：电子产品 > 手机配件 > 耳机）还是单级分类即可？

**[Answer]**不需要，一级即可

**[Question 13.2]** 产品分类由谁管理？是否需要增删改功能？

**[Answer]**管理员

**[Question 13.3]** 一个产品是否可以属于多个分类？

**[Answer]**一个分类

---

#### 关于产品下架

**[Question 14.1]** 您提到"下架的产品员工可以看到，无法兑换"。请明确：
- 下架产品在产品列表中如何显示？（灰色显示？标记"已下架"？）
- 员工是否可以查看下架产品的详情？
- 下架产品是否还显示在分类浏览中？

**[Answer]**标记"已下架"；员工可以查看下架产品的详情；可以

---

#### 关于用户界面和体验

**[Question 15.1]** 员工登录后的首页应该显示什么内容？（例如：产品列表、积分余额、最新兑换记录等）

**[Answer]**产品列表

**[Question 15.2]** 管理员登录后的首页应该显示什么内容？（例如：待审核订单数量、系统概览等）

**[Answer]**系统概况

**[Question 15.3]** 系统是否需要支持多语言？如果需要，支持哪些语言？

**[Answer]**不需要

---

#### 关于数据约束

**[Question 16.1]** 产品名称、描述是否有长度限制？

**[Answer]**100,2000

**[Question 16.2]** 产品图片是否有大小和格式限制？

**[Answer]**1Mb，格式不限

**[Question 16.3]** 员工姓名、工号等字段是否有格式要求？

**[Answer]**姓名不限；工号50位以下字符串

**[Question 16.4]** 积分数值是否有上限？（例如：单次发放不超过10000积分，员工总积分不超过100000等）

**[Answer]**无上限

---

### 追加问题 - 第二轮

#### 关于订单取消和积分退回

**[Question 17.1]** 员工取消订单后，积分是立即退回还是需要管理员审核后才退回？

**[Answer]**立即返回

**[Question 17.2]** 管理员拒绝订单后，积分如何处理？是否也退回给员工？

**[Answer]**积分直接退回

---

#### 关于产品详情页

**[Question 18.1]** 员工查看产品详情时，需要显示哪些信息？（例如：产品名称、描述、图片、所需积分、分类、上架状态等）

**[Answer]**所有字段

**[Question 18.2]** 产品详情页是否需要显示"已兑换人数"或"热门程度"等信息？

**[Answer]**不需要

---

#### 关于管理员系统概况页

**[Question 19.1]** 您提到管理员首页显示"系统概况"，请明确需要显示哪些具体信息？例如：
- 员工总数
- 待审核订单数量
- 今日/本月兑换订单数量
- 积分发放总量
- 产品总数
- 其他？

**[Answer]**员工总数、产品总数、待审核订单数量、今日/本月兑换订单数量、今日/本月积分发放总量

---

#### 关于员工状态

**[Question 20.1]** 您提到员工账号有"状态"字段。请明确有哪些状态？（例如：在职、离职、试用期等）

**[Answer]**在职、离职、试用期

**[Question 20.2]** 不同状态的员工是否有不同的权限或限制？（例如：试用期员工不能兑换产品？）

**[Answer]**不限制

---

#### 关于产品图片

**[Question 21.1]** 一个产品可以上传多少张图片？只有一张主图，还是可以有多张图片？

**[Answer]**一张即可

**[Question 21.2]** 产品图片是否需要支持删除和替换功能？

**[Answer]**支持删除与替换

---

#### 关于分页和列表显示

**[Question 22.1]** 产品列表、订单列表、员工列表等是否需要分页功能？每页显示多少条记录？

**[Answer]**需要分页，统一一页50条

**[Question 22.2]** 积分日志列表是否需要分页？是否需要按时间范围筛选？

**[Answer]**需要分页，统一一页50条；排序按时间倒序，不需要设置时间筛选

---

#### 关于密码安全

**[Question 23.1]** 密码是否有复杂度要求？（例如：最少8位、必须包含字母和数字等）

**[Answer]**不需要

**[Question 23.2]** 员工修改密码时，是否需要输入旧密码验证？

**[Answer]**需要

---

#### 关于批量发放积分

**[Question 24.1]** 批量发放积分时，如何选择目标员工？（例如：全选所有员工、按部门选择、按岗位选择、手动勾选等）

**[Answer]**支持选择范围，全选所有员工、按部门选择、按岗位选择、手动勾选

**[Question 24.2]** 批量发放积分是否需要预览功能？（显示将要发放的员工列表和总积分数）

**[Answer]**不需要

---

#### 关于产品排序

**[Question 25.1]** 产品列表的默认排序规则是什么？（例如：按创建时间倒序、按积分从低到高、按管理员设置的排序值等）

**[Answer]**按创建时间倒序

---

#### 关于核销备注

**[Question 26.1]** 您提到"核销成功也需要填写信息"。这个信息是必填还是选填？主要用于记录什么内容？

**[Answer]**选填，备注作用，例如：代领、产品有破损等等

---

### 追加问题 - 第三轮（最后一轮）

#### 关于产品分类管理

**[Question 27.1]** 产品分类是否需要排序功能？（例如：管理员可以调整分类的显示顺序）

**[Answer]**不需要

**[Question 27.2]** 删除分类时，如果该分类下还有产品，如何处理？（例如：禁止删除、将产品移到"未分类"、强制删除等）

**[Answer]**将产品移到"未分类"

---

#### 关于员工个人中心

**[Question 28.1]** 员工是否有个人中心页面？如果有，需要显示哪些信息？（例如：个人信息、积分余额、兑换历史、修改密码入口等）

**[Answer]**需要，展示导航：个人信息、积分余额、兑换历史、修改密码入口

**[Question 28.2]** 员工是否可以查看和修改自己的个人信息（如邮箱、手机号）？

**[Answer]**可以查看，无法修改

---

#### 关于管理员管理产品

**[Question 29.1]** 管理员编辑产品时，是否需要保存修改历史？（例如：谁在什么时候修改了产品信息）

**[Answer]**不需要

**[Question 29.2]** 管理员是否可以删除产品？如果可以，已有兑换记录的产品是否可以删除？

**[Answer]**可以删除，软删除；已有兑换记录的产品数据还在

---

#### 关于订单详情

**[Question 30.1]** 员工查看自己的兑换订单时，需要显示哪些信息？（例如：订单号、产品信息、所需积分、订单状态、申请时间、审核时间、审核人、拒绝原因/核销备注等）

**[Answer]**所有信息

**[Question 30.2]** 管理员查看订单列表时，是否需要按状态筛选？（例如：只看待审核的订单）

**[Answer]**需要状态筛选

---

#### 关于登录和会话

**[Question 31.1]** 用户登录后，会话有效期是多久？是否需要"记住我"功能？

**[Answer]**有效期；不需要"记住我"功能

**[Question 31.2]** 是否需要登录日志记录？（记录谁在什么时候登录了系统）

**[Answer]**不需要

---

#### 关于管理员管理员工

**[Question 32.1]** 管理员查看员工列表时，是否需要搜索功能？（例如：按姓名、工号搜索）

**[Answer]**支持筛选：姓名、工号、部门、岗位

**[Question 32.2]** 管理员是否可以编辑员工信息？如果可以，哪些字段可以编辑？

**[Answer]**可以，除工号其他都可编辑

**[Question 32.3]** 管理员查看员工详情时，是否需要显示该员工的积分历史和兑换历史？

**[Answer]**不显示

---

#### 关于职位权限管理

**[Question 33.1]** 管理员创建职位时，需要填写哪些信息？（例如：职位名称、职位描述、权限列表等）

**[Answer]**职位名称、职位描述、权限列表

**[Question 33.2]** 是否可以删除职位？如果可以，已分配给管理员的职位是否可以删除？

**[Answer]**可以删除，已分配给管理员的职位可以删除，删除后这些管理员无任何权限

**[Question 33.3]** 一个管理员是否只能有一个职位，还是可以有多个职位（权限叠加）？

**[Answer]**单一职位

---

#### 关于按分类浏览产品

**[Question 34.1]** 员工浏览产品时，如何按分类查看？（例如：点击分类标签、侧边栏分类菜单等）

**[Answer]**不需要

**[Question 34.2]** 是否有"全部产品"或"未分类"的选项？

**[Answer]**不需要

---

#### 关于积分不足

**[Question 35.1]** 员工积分不足时，兑换按钮如何显示？（例如：禁用按钮、显示"积分不足"提示等）

**[Answer]**显示积分不足

---

#### 关于系统初始化

**[Question 36.1]** 系统首次部署时，除了创建 admin 管理员账号，是否需要初始化一些默认数据？（例如：默认分类、示例产品等）

**[Answer]**需要，默认岗位、默认分类、示例产品

---

### 追加问题 - 第四轮（最终确认）

#### 关于会话有效期

**[Question 37.1]** 您提到"有效期"，请明确具体的会话有效期时长？（例如：30分钟、2小时、24小时等）

**[Answer]**24小时

---

#### 关于员工提交兑换申请

**[Question 38.1]** 员工提交兑换申请时，积分是立即扣除还是等待审核通过后才扣除？

**[Answer]**立即扣除

---

#### 关于产品上架状态

**[Question 39.1]** 产品是否有"上架"和"下架"两种状态？新创建的产品默认是上架还是下架？

**[Answer]**是的；默认下架

---

#### 关于管理员账号

**[Question 40.1]** 管理员账号的创建流程中，是否也需要填写类似员工的信息（姓名、工号、部门等）？还是只需要用户名和密码？

**[Answer]**需要内容员工的所有信息

**[Question 40.2]** 管理员是否可以修改自己的密码？

**[Answer]**可以修改自己的密码

---

#### 关于默认数据

**[Question 41.1]** 您提到系统初始化需要"默认岗位、默认分类、示例产品"。请明确：
- 默认岗位有哪些？（例如：普通员工、部门经理等）
- 默认分类有哪些？（例如：电子产品、生活用品、图书等）
- 示例产品需要几个？什么类型？

**[Answer]**核销员、HR、超级管理员；电子产品、生活用品、图书；每个分类3个产品

---

#### 关于订单号

**[Question 42.1]** 兑换订单是否需要生成订单号？如果需要，订单号的格式是什么？（例如：时间戳、流水号等）

**[Answer]**时间戳+随机数

---

#### 关于产品兑换限制

**[Question 43.1]** 同一个产品，员工是否可以多次兑换？是否有兑换次数限制？

**[Answer]**可以；无限制

---

#### 关于管理员职位

**[Question 44.1]** 初始的 admin 管理员是否也需要关联一个职位？还是 admin 是特殊的，不需要职位？

**[Answer]**admin关联超级管理员

---

#### 关于积分变动类型

**[Question 45.1]** 积分日志中的"变动类型"有哪些？（例如：入职发放、管理员发放、管理员扣除、兑换消费、订单取消退回、订单拒绝退回等）

**[Answer]**入职发放、管理员发放、管理员扣除、兑换消费、订单取消退回、订单拒绝退回

---

#### 关于员工登录账号

**[Question 46.1]** 员工登录时使用什么作为账号？（例如：工号、邮箱、手机号、自定义用户名等）

**[Answer]**工号+密码

---

## 下一步行动

✅ **需求收集阶段已完成！**

所有问题已回答完毕，共收集了 46 个问题的详细答案。现在开始创建正式的需求文档。

接下来我将：
1. ✅ 基于您的回答创建正式的 Requirements 文档
2. ✅ 使用 EARS 模式编写验收标准
3. ✅ 确保所有需求符合 INCOSE 质量规则
4. ✅ 提交给您审查和批准

---

**正在生成需求文档...**

✅ **需求文档已生成完成！**

文档位置：`.kiro/specs/requirements.md`

文档包含以下内容：
1. ✅ 项目概述和目标
2. ✅ 用户角色定义（员工、管理员）
3. ✅ 功能需求（使用 EARS 模式编写验收标准）
4. ✅ 非功能性需求
5. ✅ 完整的数据模型定义
6. ✅ 业务规则说明
7. ✅ 用户故事
8. ✅ 系统约束和假设
9. ✅ 验收标准总结

---

## 修改记录

### 修改 1 - 删除权限管理和岗位权限校验（2026-01-14）

**修改内容**:
- ✅ 删除了职位（Position）实体和相关的权限管理功能
- ✅ 删除了 FR-PERM-001（职位管理）和 FR-PERM-002（权限验证）功能需求
- ✅ 删除了超级管理员角色，所有管理员拥有相同的全部权限
- ✅ 简化了管理员账号创建流程，不再需要关联职位
- ✅ 更新了系统初始化逻辑，不再创建默认职位
- ✅ 更新了所有功能需求，移除了权限验证相关的验收标准
- ✅ 更新了数据模型，移除了管理员表中的职位ID外键
- ✅ 更新了业务规则，简化了权限规则
- ✅ 更新了用户故事，删除了权限管理相关的故事

**影响范围**:
- 用户角色定义
- 功能需求（FR-PERM-001, FR-PERM-002 已删除）
- 管理员管理功能（FR-ADMIN-001, FR-ADMIN-002）
- 所有管理员操作的功能需求（移除权限验证）
- 数据模型（删除 Position 实体）
- 业务规则
- 用户故事

---

### 修改 2 - 删除产品分类相关逻辑（2026-01-14）

**修改内容**:
- ✅ 删除了产品分类（Category）实体和所有相关功能
- ✅ 删除了 FR-CAT-001（创建产品分类）、FR-CAT-002（编辑产品分类）、FR-CAT-003（删除产品分类）功能需求
- ✅ 从产品实体中移除了分类ID外键
- ✅ 从产品创建功能中移除了分类字段
- ✅ 从产品详情显示中移除了分类信息
- ✅ 更新了系统初始化逻辑，不再创建默认分类
- ✅ 更新了业务规则，移除了分类相关规则
- ✅ 更新了用户故事，移除了分类相关内容

**影响范围**:
- 管理员主要职责（移除"管理产品分类"）
- 功能需求（FR-CAT-001, FR-CAT-002, FR-CAT-003 已删除）
- 产品管理功能（FR-PROD-001, FR-PROD-VIEW-002）
- 系统初始化功能（FR-ADMIN-002）
- 数据模型（删除 Category 实体，Product 实体移除分类ID）
- 业务规则
- 用户故事

**请您审查修改后的需求文档。如有其他需要调整的地方，请告诉我。**
