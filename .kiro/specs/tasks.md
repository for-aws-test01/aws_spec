# AWSomeShop 任务分解文档

## 文档信息

- **项目名称**: AWSomeShop 内部员工福利电商系统
- **文档版本**: 1.0
- **创建日期**: 2026-01-14
- **文档状态**: 待审批
- **基于文档**: requirements.md v1.0, design.md v1.0

## 1. 任务概述

本文档将 AWSomeShop 项目拆分为 85 个可执行的开发任务，分为 14 个阶段。每个任务包含详细的描述、验收标准、依赖关系和工作量估算。

## 2. 任务优先级定义

- **P0**: 阻塞性任务，必须最先完成
- **P1**: 高优先级，核心功能
- **P2**: 中优先级，重要功能
- **P3**: 低优先级，辅助功能

## 3. 工作量估算单位

- **XS**: 0.5 天
- **S**: 1 天
- **M**: 2 天
- **L**: 3 天
- **XL**: 5 天

## 4. 任务列表

---

## 阶段一：项目初始化 (3 任务)

### TASK-001: 创建项目结构
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: 无  
**负责模块**: 基础设施

**任务描述**:
创建前后端项目的目录结构，初始化 Git 仓库。

**验收标准**:
- [ ] 创建根目录 `awsomeshop/`
- [ ] 创建后端项目目录 `backend/` 及子目录
- [ ] 创建前端项目目录 `frontend/` 及子目录
- [ ] 初始化 Git 仓库
- [ ] 创建 `.gitignore` 文件
- [ ] 创建 `README.md` 文件

**技术要点**:
- 参考设计文档第 15 节的项目结构
- 后端使用 Go modules (`go mod init`)
- 前端使用 npm (`npm init`)

---

### TASK-002: 配置开发环境
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: TASK-001  
**负责模块**: 基础设施

**任务描述**:
配置后端和前端的开发环境，安装必要的依赖。

**验收标准**:
- [ ] 后端安装 Go 依赖：Gin, GORM, JWT, bcrypt, CORS
- [ ] 前端安装 npm 依赖：Webpack, Babel, Ant Design CSS
- [ ] 创建后端 `.env.example` 文件
- [ ] 创建前端 `webpack.config.js` 文件
- [ ] 配置 Webpack 开发和生产环境

**技术要点**:
```bash
# 后端依赖
go get -u github.com/gin-gonic/gin
go get -u gorm.io/gorm
go get -u gorm.io/driver/mysql
go get -u github.com/golang-jwt/jwt/v5
go get -u golang.org/x/crypto/bcrypt
go get -u github.com/gin-contrib/cors

# 前端依赖
npm install webpack webpack-cli webpack-dev-server
npm install babel-loader @babel/core @babel/preset-env
npm install css-loader style-loader
npm install antd
```

---

### TASK-003: 设置数据库
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: TASK-001  
**负责模块**: 数据库

**任务描述**:
创建数据库和表结构，执行初始化脚本。

**验收标准**:
- [ ] 创建数据库 `awsomeshop`
- [ ] 编写 `schema.sql` 创建所有表
- [ ] 编写 `seed.sql` 插入初始数据
- [ ] 执行迁移脚本
- [ ] 验证表结构和初始数据

**技术要点**:
- 参考设计文档第 3.2 节的表结构
- 参考设计文档第 10.5 节的种子数据
- 初始管理员密码使用 bcrypt 哈希

---

## 阶段二：后端基础设施 (5 任务)

### TASK-004: 实现数据库连接和配置管理
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: TASK-002, TASK-003  
**负责模块**: 基础设施

**任务描述**:
实现数据库连接池和环境变量配置管理。

**验收标准**:
- [ ] 实现 `pkg/database/mysql.go` 数据库连接
- [ ] 实现 `pkg/config/config.go` 配置管理
- [ ] 从 `.env` 文件读取配置
- [ ] 实现数据库连接池
- [ ] 实现优雅关闭

**技术要点**:
```go
// 配置项
type Config struct {
    DBHost     string
    DBPort     string
    DBUser     string
    DBPassword string
    DBName     string
    JWTSecret  string
    ServerPort string
}
```

---

### TASK-005: 实现统一响应格式和错误处理
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: TASK-004  
**负责模块**: 基础设施

**任务描述**:
实现统一的 API 响应格式和错误码定义。

**验收标准**:
- [ ] 实现 `internal/common/response.go` 响应格式
- [ ] 实现 `internal/common/errors.go` 错误码定义
- [ ] 定义所有错误码常量
- [ ] 实现成功响应函数
- [ ] 实现错误响应函数
- [ ] 实现分页响应函数

**技术要点**:
```go
// 响应格式
type Response struct {
    Data    interface{} `json:"data,omitempty"`
    Message string      `json:"message"`
}

type ErrorResponse struct {
    Error   string      `json:"error"`
    Code    string      `json:"code"`
    Details interface{} `json:"details,omitempty"`
}

// 错误码
const (
    ErrUserNotFound      = "USER_NOT_FOUND"
    ErrInvalidPassword   = "INVALID_PASSWORD"
    ErrInsufficientPoints = "INSUFFICIENT_POINTS"
    // ...
)
```

---

### TASK-006: 实现日志模块
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-004  
**负责模块**: 日志

**任务描述**:
实现应用日志和审计日志模块。

**验收标准**:
- [ ] 实现 `internal/logger/service.go` 应用日志服务
- [ ] 实现 `internal/logger/model.go` 应用日志模型
- [ ] 实现 `internal/audit/service.go` 审计日志服务
- [ ] 实现 `internal/audit/model.go` 审计日志模型
- [ ] 实现日志写入数据库
- [ ] 实现日志级别过滤（INFO, WARNING, ERROR）

**技术要点**:
- 应用日志记录系统运行信息
- 审计日志记录用户操作（操作前后数据）
- 使用 JSON 格式存储操作数据

---

### TASK-007: 实现 JWT 认证中间件
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-005  
**负责模块**: 认证

**任务描述**:
实现 JWT Token 生成、验证和认证中间件。

**验收标准**:
- [ ] 实现 `internal/auth/middleware.go` JWT 中间件
- [ ] 实现 Token 生成函数
- [ ] 实现 Token 验证函数
- [ ] 实现权限检查（员工/管理员）
- [ ] 实现 Cookie 设置和读取
- [ ] 处理 Token 过期

**技术要点**:
```go
// JWT Claims
type Claims struct {
    UserID     uint   `json:"user_id"`
    EmployeeID string `json:"employee_id"`
    Role       string `json:"role"`
    jwt.RegisteredClaims
}

// 中间件
func AuthMiddleware() gin.HandlerFunc
func AdminMiddleware() gin.HandlerFunc
```

---

### TASK-008: 实现 CORS 中间件
**优先级**: P0  
**工作量**: XS (0.5天)  
**依赖**: TASK-004  
**负责模块**: 基础设施

**任务描述**:
配置 CORS 中间件，允许前端跨域访问。

**验收标准**:
- [ ] 配置 CORS 允许的源（localhost:8000）
- [ ] 配置允许的 HTTP 方法
- [ ] 配置允许的请求头
- [ ] 启用 Credentials（允许携带 Cookie）
- [ ] 设置预检请求缓存时间

**技术要点**:
```go
router.Use(cors.New(cors.Config{
    AllowOrigins:     []string{"http://localhost:8000"},
    AllowMethods:     []string{"GET", "POST", "PUT", "DELETE", "OPTIONS"},
    AllowHeaders:     []string{"Origin", "Content-Type", "Accept"},
    AllowCredentials: true,
    MaxAge:           12 * time.Hour,
}))
```


---

## 阶段三：用户认证模块 (3 任务)

### TASK-009: 实现用户登录 API
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-007  
**负责模块**: 认证

**任务描述**:
实现用户登录功能，支持员工和管理员登录。

**验收标准**:
- [ ] 实现 `POST /api/auth/login` 接口
- [ ] 验证工号和密码
- [ ] 检查账号状态（离职账号拒绝登录）
- [ ] 生成 JWT Token
- [ ] 设置 Cookie
- [ ] 返回用户信息
- [ ] 记录应用日志

**技术要点**:
- 使用 bcrypt 验证密码
- Token 有效期 24 小时
- Cookie 属性：HttpOnly=true, SameSite=Lax

---

### TASK-010: 实现用户登出 API
**优先级**: P1  
**工作量**: XS (0.5天)  
**依赖**: TASK-009  
**负责模块**: 认证

**任务描述**:
实现用户登出功能，清除 Cookie。

**验收标准**:
- [ ] 实现 `POST /api/auth/logout` 接口
- [ ] 清除 Cookie（设置 MaxAge=0）
- [ ] 返回成功响应
- [ ] 记录应用日志

---

### TASK-011: 实现修改密码 API
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-009  
**负责模块**: 认证

**任务描述**:
实现用户修改密码功能。

**验收标准**:
- [ ] 实现 `PUT /api/auth/password` 接口
- [ ] 验证旧密码
- [ ] 更新新密码（bcrypt 哈希）
- [ ] 返回成功响应
- [ ] 记录审计日志

---

## 阶段四：用户管理模块 (7 任务)

### TASK-012: 实现工号生成算法
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: TASK-004  
**负责模块**: 用户管理

**任务描述**:
实现自动生成工号的算法。

**验收标准**:
- [ ] 实现工号生成函数
- [ ] 格式：YYYYMMDD-NNN
- [ ] 每天从 001 开始
- [ ] 检查当天是否达到 999 上限
- [ ] 返回生成的工号或错误

**技术要点**:
```go
func GenerateEmployeeID(db *gorm.DB) (string, error) {
    today := time.Now().Format("20060102")
    var count int64
    db.Model(&User{}).
        Where("employee_id LIKE ?", today+"-%").
        Count(&count)
    
    if count >= 999 {
        return "", errors.New("EMPLOYEE_LIMIT_REACHED")
    }
    
    return fmt.Sprintf("%s-%03d", today, count+1), nil
}
```

---

### TASK-013: 实现创建员工 API
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-012, TASK-006  
**负责模块**: 用户管理

**任务描述**:
实现管理员创建员工账号功能。

**验收标准**:
- [ ] 实现 `POST /api/admin/employees` 接口
- [ ] 自动生成工号
- [ ] 密码使用 bcrypt 哈希
- [ ] 自动发放 1000 积分
- [ ] 记录积分日志（入职发放）
- [ ] 使用事务保证数据一致性
- [ ] 记录审计日志
- [ ] 返回员工信息

**技术要点**:
- 使用数据库事务
- 同时创建用户和积分日志

---

### TASK-014: 实现员工列表查询 API
**优先级**: P1  
**工作量**: S (1天)  
**依赖**: TASK-013  
**负责模块**: 用户管理

**任务描述**:
实现管理员查询员工列表功能，支持筛选和分页。

**验收标准**:
- [ ] 实现 `GET /api/admin/employees` 接口
- [ ] 支持分页（page, page_size）
- [ ] 支持按姓名筛选
- [ ] 支持按部门筛选
- [ ] 支持按岗位筛选
- [ ] 返回分页数据

**技术要点**:
- 默认每页 50 条
- 使用 GORM 的 Where 和 Limit/Offset

---

### TASK-015: 实现员工详情查询 API
**优先级**: P2  
**工作量**: XS (0.5天)  
**依赖**: TASK-013  
**负责模块**: 用户管理

**任务描述**:
实现管理员查询员工详情功能。

**验收标准**:
- [ ] 实现 `GET /api/admin/employees/:id` 接口
- [ ] 返回员工完整信息
- [ ] 处理员工不存在的情况

---

### TASK-016: 实现更新员工信息 API
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-013, TASK-006  
**负责模块**: 用户管理

**任务描述**:
实现管理员更新员工信息功能。

**验收标准**:
- [ ] 实现 `PUT /api/admin/employees/:id` 接口
- [ ] 允许修改除工号外的所有字段
- [ ] 工号不可修改
- [ ] 记录审计日志（操作前后数据）
- [ ] 返回更新后的信息

---

### TASK-017: 实现重置员工密码 API
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-013, TASK-006  
**负责模块**: 用户管理

**任务描述**:
实现管理员重置员工密码功能。

**验收标准**:
- [ ] 实现 `PUT /api/admin/employees/:id/password` 接口
- [ ] 新密码使用 bcrypt 哈希
- [ ] 记录审计日志
- [ ] 返回成功响应

---

### TASK-018: 实现创建管理员 API
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-013  
**负责模块**: 用户管理

**任务描述**:
实现创建管理员账号功能（仅 admin 可创建）。

**验收标准**:
- [ ] 实现 `POST /api/admin/admins` 接口
- [ ] 检查操作人是否为 admin
- [ ] 自动生成工号
- [ ] 设置 role 为 admin
- [ ] 不发放积分
- [ ] 记录审计日志

---

## 阶段五：产品管理模块 (9 任务)

### TASK-019: 实现图片上传功能
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-005  
**负责模块**: 文件管理

**任务描述**:
实现产品图片上传功能。

**验收标准**:
- [ ] 实现图片上传处理
- [ ] 验证文件大小（≤1MB）
- [ ] 生成 UUID 文件名
- [ ] 保存到 `/uploads/image/` 目录
- [ ] 返回图片访问路径
- [ ] 处理上传错误

**技术要点**:
```go
func UploadImage(file *multipart.FileHeader) (string, error) {
    // 验证大小
    if file.Size > 1024*1024 {
        return "", errors.New("FILE_TOO_LARGE")
    }
    
    // 生成 UUID 文件名
    uuid := uuid.New().String()
    ext := filepath.Ext(file.Filename)
    filename := uuid + ext
    
    // 保存文件
    dst := filepath.Join("uploads/image", filename)
    // ...
    
    return "/images/" + filename, nil
}
```

---

### TASK-020: 实现图片访问 API
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: TASK-019  
**负责模块**: 文件管理

**任务描述**:
实现图片访问代理接口。

**验收标准**:
- [ ] 实现 `GET /images/:filename` 接口
- [ ] 从 `/uploads/image/` 读取文件
- [ ] 设置正确的 Content-Type
- [ ] 处理文件不存在的情况
- [ ] 返回图片数据

---

### TASK-021: 实现创建产品 API
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-019, TASK-006  
**负责模块**: 产品管理

**任务描述**:
实现管理员创建产品功能。

**验收标准**:
- [ ] 实现 `POST /api/admin/products` 接口
- [ ] 处理 multipart/form-data
- [ ] 上传产品图片
- [ ] 创建产品记录
- [ ] 默认状态为 offline
- [ ] 记录审计日志
- [ ] 返回产品信息

---

### TASK-022: 实现产品列表查询 API（管理员）
**优先级**: P1  
**工作量**: S (1天)  
**依赖**: TASK-021  
**负责模块**: 产品管理

**任务描述**:
实现管理员查询产品列表功能。

**验收标准**:
- [ ] 实现 `GET /api/admin/products` 接口
- [ ] 支持分页
- [ ] 支持 include_deleted 参数
- [ ] 按创建时间倒序排列
- [ ] 返回分页数据

---

### TASK-023: 实现产品列表查询 API（员工）
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: TASK-021  
**负责模块**: 产品管理

**任务描述**:
实现员工查询产品列表功能。

**验收标准**:
- [ ] 实现 `GET /api/products` 接口
- [ ] 支持分页
- [ ] 不显示已删除产品
- [ ] 显示所有产品（包括下架）
- [ ] 按创建时间倒序排列
- [ ] 返回分页数据

---

### TASK-024: 实现产品详情查询 API
**优先级**: P1  
**工作量**: XS (0.5天)  
**依赖**: TASK-021  
**负责模块**: 产品管理

**任务描述**:
实现产品详情查询功能。

**验收标准**:
- [ ] 实现 `GET /api/products/:id` 接口
- [ ] 返回产品完整信息
- [ ] 员工和管理员都可访问
- [ ] 处理产品不存在的情况

---

### TASK-025: 实现更新产品 API
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-021, TASK-006  
**负责模块**: 产品管理

**任务描述**:
实现管理员更新产品信息功能。

**验收标准**:
- [ ] 实现 `PUT /api/admin/products/:id` 接口
- [ ] 支持更新所有字段
- [ ] 支持更新图片（可选）
- [ ] 记录审计日志
- [ ] 返回更新后的信息

---

### TASK-026: 实现删除产品 API
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-021, TASK-006  
**负责模块**: 产品管理

**任务描述**:
实现管理员删除产品功能（软删除）。

**验收标准**:
- [ ] 实现 `DELETE /api/admin/products/:id` 接口
- [ ] 软删除（设置 is_deleted=1）
- [ ] 不删除图片文件
- [ ] 记录审计日志
- [ ] 返回成功响应

---

### TASK-027: 实现产品上架/下架 API
**优先级**: P1  
**工作量**: S (1天)  
**依赖**: TASK-021, TASK-006  
**负责模块**: 产品管理

**任务描述**:
实现管理员上架/下架产品功能。

**验收标准**:
- [ ] 实现 `PUT /api/admin/products/:id/status` 接口
- [ ] 更新产品状态（online/offline）
- [ ] 记录审计日志
- [ ] 返回成功响应


---

## 阶段六：积分管理模块 (6 任务)

### TASK-028: 实现积分余额查询 API（员工）
**优先级**: P1  
**工作量**: XS (0.5天)  
**依赖**: TASK-013  
**负责模块**: 积分管理

**任务描述**:
实现员工查询个人积分余额功能。

**验收标准**:
- [ ] 实现 `GET /api/points/balance` 接口
- [ ] 从 JWT 获取当前用户
- [ ] 返回积分余额和用户信息

---

### TASK-029: 实现积分日志查询 API（员工）
**优先级**: P1  
**工作量**: S (1天)  
**依赖**: TASK-013  
**负责模块**: 积分管理

**任务描述**:
实现员工查询个人积分日志功能。

**验收标准**:
- [ ] 实现 `GET /api/points/logs` 接口
- [ ] 只返回当前用户的日志
- [ ] 支持分页
- [ ] 按时间倒序排列
- [ ] 返回分页数据

---

### TASK-030: 实现积分日志查询 API（管理员）
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-013  
**负责模块**: 积分管理

**任务描述**:
实现管理员查询所有积分日志功能。

**验收标准**:
- [ ] 实现 `GET /api/admin/points/logs` 接口
- [ ] 返回所有用户的日志
- [ ] 关联用户和操作人信息
- [ ] 支持分页
- [ ] 按时间倒序排列
- [ ] 返回分页数据

---

### TASK-031: 实现发放积分 API
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-013, TASK-006  
**负责模块**: 积分管理

**任务描述**:
实现管理员发放积分功能。

**验收标准**:
- [ ] 实现 `POST /api/admin/points/grant` 接口
- [ ] 增加用户积分
- [ ] 记录积分日志（类型：admin_grant）
- [ ] 使用事务保证数据一致性
- [ ] 记录审计日志
- [ ] 返回新积分余额

**技术要点**:
```go
tx := db.Begin()
// 1. 更新用户积分
// 2. 创建积分日志
tx.Commit()
```

---

### TASK-032: 实现批量发放积分 API
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-031  
**负责模块**: 积分管理

**任务描述**:
实现管理员批量发放积分功能。

**验收标准**:
- [ ] 实现 `POST /api/admin/points/grant-batch` 接口
- [ ] 支持按用户 ID 列表批量发放
- [ ] 支持按部门筛选批量发放
- [ ] 支持按岗位筛选批量发放
- [ ] 支持全选所有员工
- [ ] 为每个用户创建积分日志
- [ ] 使用事务
- [ ] 返回成功和失败数量

---

### TASK-033: 实现扣除积分 API
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-031  
**负责模块**: 积分管理

**任务描述**:
实现管理员扣除积分功能。

**验收标准**:
- [ ] 实现 `POST /api/admin/points/deduct` 接口
- [ ] 减少用户积分
- [ ] 记录积分日志（类型：admin_deduct）
- [ ] 使用事务保证数据一致性
- [ ] 记录审计日志
- [ ] 返回新积分余额

---

## 阶段七：订单管理模块 (8 任务)

### TASK-034: 实现订单号生成算法
**优先级**: P0  
**工作量**: XS (0.5天)  
**依赖**: TASK-004  
**负责模块**: 订单管理

**任务描述**:
实现自动生成订单号的算法。

**验收标准**:
- [ ] 实现订单号生成函数
- [ ] 格式：YYYYMMDDHHmmss-XXXXXX
- [ ] 随机字符为大写字母+数字
- [ ] 返回生成的订单号

**技术要点**:
```go
func GenerateOrderNo() string {
    timestamp := time.Now().Format("20060102150405")
    random := generateRandomString(6)
    return fmt.Sprintf("%s-%s", timestamp, random)
}
```

---

### TASK-035: 实现兑换产品 API
**优先级**: P0  
**工作量**: L (3天)  
**依赖**: TASK-034, TASK-023, TASK-006  
**负责模块**: 订单管理

**任务描述**:
实现员工兑换产品功能，使用事务保证数据一致性。

**验收标准**:
- [ ] 实现 `POST /api/orders/redeem` 接口
- [ ] 验证产品是否存在
- [ ] 验证产品是否已上架
- [ ] 验证用户积分是否充足
- [ ] 生成订单号
- [ ] 创建产品快照（JSON）
- [ ] 扣除用户积分
- [ ] 创建订单（状态：pending）
- [ ] 记录积分日志（类型：redeem）
- [ ] 使用事务保证原子性
- [ ] 返回订单信息和新积分余额

**技术要点**:
```go
tx := db.Begin()
// 1. 扣除积分
// 2. 创建订单
// 3. 创建积分日志
tx.Commit()
```

---

### TASK-036: 实现订单列表查询 API（员工）
**优先级**: P1  
**工作量**: S (1天)  
**依赖**: TASK-035  
**负责模块**: 订单管理

**任务描述**:
实现员工查询个人订单列表功能。

**验收标准**:
- [ ] 实现 `GET /api/orders` 接口
- [ ] 只返回当前用户的订单
- [ ] 支持分页
- [ ] 按申请时间倒序排列
- [ ] 返回产品快照信息
- [ ] 返回分页数据

---

### TASK-037: 实现订单详情查询 API（员工）
**优先级**: P2  
**工作量**: XS (0.5天)  
**依赖**: TASK-035  
**负责模块**: 订单管理

**任务描述**:
实现员工查询订单详情功能。

**验收标准**:
- [ ] 实现 `GET /api/orders/:id` 接口
- [ ] 只能查看自己的订单
- [ ] 返回订单完整信息
- [ ] 返回产品快照
- [ ] 处理订单不存在的情况

---

### TASK-038: 实现取消订单 API
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-035, TASK-006  
**负责模块**: 订单管理

**任务描述**:
实现员工取消订单功能，退回积分。

**验收标准**:
- [ ] 实现 `PUT /api/orders/:id/cancel` 接口
- [ ] 验证订单状态为 pending
- [ ] 只能取消自己的订单
- [ ] 更新订单状态为 cancelled
- [ ] 退回积分
- [ ] 记录积分日志（类型：order_cancel_refund）
- [ ] 使用事务保证原子性
- [ ] 返回新积分余额

**技术要点**:
```go
tx := db.Begin()
// 1. 更新订单状态
// 2. 退回积分
// 3. 创建积分日志
tx.Commit()
```

---

### TASK-039: 实现订单列表查询 API（管理员）
**优先级**: P1  
**工作量**: S (1天)  
**依赖**: TASK-035  
**负责模块**: 订单管理

**任务描述**:
实现管理员查询所有订单列表功能。

**验收标准**:
- [ ] 实现 `GET /api/admin/orders` 接口
- [ ] 返回所有订单
- [ ] 支持按状态筛选
- [ ] 支持分页
- [ ] 关联用户和产品信息
- [ ] 按申请时间倒序排列
- [ ] 返回分页数据

---

### TASK-040: 实现核销订单 API
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-039, TASK-006  
**负责模块**: 订单管理

**任务描述**:
实现管理员核销订单功能。

**验收标准**:
- [ ] 实现 `PUT /api/admin/orders/:id/approve` 接口
- [ ] 验证订单状态为 pending
- [ ] 更新订单状态为 approved
- [ ] 记录审核时间和审核人
- [ ] 保存核销备注（可选）
- [ ] 记录审计日志
- [ ] 返回成功响应

---

### TASK-041: 实现拒绝订单 API
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-039, TASK-006  
**负责模块**: 订单管理

**任务描述**:
实现管理员拒绝订单功能，退回积分。

**验收标准**:
- [ ] 实现 `PUT /api/admin/orders/:id/reject` 接口
- [ ] 验证订单状态为 pending
- [ ] 验证拒绝原因必填
- [ ] 更新订单状态为 rejected
- [ ] 记录审核时间和审核人
- [ ] 保存拒绝原因
- [ ] 退回积分
- [ ] 记录积分日志（类型：order_reject_refund）
- [ ] 使用事务保证原子性
- [ ] 记录审计日志
- [ ] 返回成功响应

**技术要点**:
```go
tx := db.Begin()
// 1. 更新订单状态
// 2. 退回积分
// 3. 创建积分日志
tx.Commit()
```

---

## 阶段八：系统概况模块 (2 任务)

### TASK-042: 实现系统概况 API
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-013, TASK-021, TASK-035  
**负责模块**: 系统管理

**任务描述**:
实现管理员查看系统概况功能。

**验收标准**:
- [ ] 实现 `GET /api/admin/dashboard` 接口
- [ ] 统计员工总数
- [ ] 统计产品总数
- [ ] 统计待审核订单数量
- [ ] 统计今日兑换订单数量
- [ ] 统计本月兑换订单数量
- [ ] 统计今日积分发放总量
- [ ] 统计本月积分发放总量
- [ ] 返回统计数据

**技术要点**:
- 使用 COUNT 聚合查询
- 使用日期范围筛选

---

### TASK-043: 实现个人信息查询 API
**优先级**: P2  
**工作量**: XS (0.5天)  
**依赖**: TASK-013  
**负责模块**: 用户管理

**任务描述**:
实现员工查询个人信息功能。

**验收标准**:
- [ ] 实现 `GET /api/profile` 接口
- [ ] 从 JWT 获取当前用户
- [ ] 返回用户完整信息（不含密码）

---

## 阶段九：前端基础设施 (8 任务)

### TASK-044: 配置 Webpack 构建
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-002  
**负责模块**: 前端基础

**任务描述**:
配置 Webpack 构建流程。

**验收标准**:
- [ ] 配置 webpack.config.js
- [ ] 配置入口和输出
- [ ] 配置 Babel 转译
- [ ] 配置 CSS 加载
- [ ] 配置开发服务器
- [ ] 配置生产环境构建
- [ ] 测试构建成功

**技术要点**:
```javascript
module.exports = {
  entry: './src/js/app.js',
  output: {
    path: path.resolve(__dirname, 'dist'),
    filename: 'js/bundle.js'
  },
  module: {
    rules: [
      { test: /\.js$/, use: 'babel-loader' },
      { test: /\.css$/, use: ['style-loader', 'css-loader'] }
    ]
  }
}
```

---

### TASK-045: 配置 Express 服务器
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: TASK-044  
**负责模块**: 前端基础

**任务描述**:
配置 Express 服务器托管静态文件。

**验收标准**:
- [ ] 创建 server.js
- [ ] 托管 dist 目录
- [ ] 配置 History 路由支持
- [ ] 所有路由返回 index.html
- [ ] 监听 8000 端口
- [ ] 测试服务器启动

**技术要点**:
```javascript
const express = require('express');
const path = require('path');
const app = express();

app.use(express.static('dist'));

app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, 'dist', 'index.html'));
});

app.listen(8000);
```

---

### TASK-046: 实现路由管理
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-045  
**负责模块**: 前端基础

**任务描述**:
实现前端路由管理器。

**验收标准**:
- [ ] 创建 router.js
- [ ] 实现路由注册
- [ ] 实现路由导航
- [ ] 使用 History API
- [ ] 处理 popstate 事件
- [ ] 支持路由参数
- [ ] 测试路由跳转

**技术要点**:
```javascript
class Router {
  constructor() {
    this.routes = {};
  }
  
  register(path, handler) {
    this.routes[path] = handler;
  }
  
  navigate(path) {
    window.history.pushState({}, '', path);
    this.loadRoute(path);
  }
}
```

---

### TASK-047: 实现 API 调用封装
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-008  
**负责模块**: 前端基础

**任务描述**:
封装 API 调用方法。

**验收标准**:
- [ ] 创建 api.js
- [ ] 实现 API 类
- [ ] 封装 GET/POST/PUT/DELETE 方法
- [ ] 配置 baseURL
- [ ] 配置 credentials: 'include'
- [ ] 处理响应和错误
- [ ] 测试 API 调用

**技术要点**:
```javascript
class API {
  async request(method, path, data) {
    const response = await fetch(`${baseURL}${path}`, {
      method,
      headers: { 'Content-Type': 'application/json' },
      credentials: 'include',
      body: data ? JSON.stringify(data) : null
    });
    return response.json();
  }
}
```

---

### TASK-048: 实现认证逻辑
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: TASK-047  
**负责模块**: 前端基础

**任务描述**:
实现前端认证逻辑。

**验收标准**:
- [ ] 创建 auth.js
- [ ] 实现登录函数
- [ ] 实现登出函数
- [ ] 实现获取当前用户函数
- [ ] 使用 localStorage 存储用户信息
- [ ] 实现权限检查
- [ ] 测试认证流程

---

### TASK-049: 实现 Toast 提示组件
**优先级**: P1  
**工作量**: S (1天)  
**依赖**: TASK-044  
**负责模块**: 前端组件

**任务描述**:
实现 Toast 提示组件。

**验收标准**:
- [ ] 创建 toast.js
- [ ] 实现 showToast 函数
- [ ] 支持不同类型（success, error, info）
- [ ] 使用 Ant Design 样式
- [ ] 自动消失（3秒）
- [ ] 测试提示显示

---

### TASK-050: 实现分页组件
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-044  
**负责模块**: 前端组件

**任务描述**:
实现分页组件。

**验收标准**:
- [ ] 创建 pagination.js
- [ ] 实现分页 UI
- [ ] 使用 Ant Design 样式
- [ ] 支持页码切换
- [ ] 支持每页数量设置
- [ ] 触发回调函数
- [ ] 测试分页功能

---

### TASK-051: 实现导航栏组件
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-046, TASK-048  
**负责模块**: 前端组件

**任务描述**:
实现顶部导航栏组件。

**验收标准**:
- [ ] 创建 navbar.js
- [ ] 实现导航菜单
- [ ] 显示用户信息
- [ ] 实现登出按钮
- [ ] 根据角色显示不同菜单
- [ ] 使用 Ant Design 样式
- [ ] 测试导航功能


---

## 阶段十：前端员工端页面 (8 任务)

### TASK-052: 实现登录页
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-048, TASK-049  
**负责模块**: 前端页面

**任务描述**: 实现员工和管理员登录页面。

**验收标准**:
- [ ] 创建登录页面 HTML
- [ ] 实现表单验证
- [ ] 调用登录 API
- [ ] 保存用户信息到 localStorage
- [ ] 根据角色跳转（员工→产品列表，管理员→系统概况）
- [ ] 显示错误提示
- [ ] 使用 Ant Design 样式

---

### TASK-053: 实现产品列表页
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-050, TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现员工端产品列表页（首页）。

**验收标准**:
- [ ] 调用产品列表 API
- [ ] 卡片网格布局显示产品
- [ ] 显示产品图片、名称、积分、状态
- [ ] 实现分页
- [ ] 点击卡片跳转到详情页
- [ ] 使用 Ant Design 样式

---

### TASK-054: 实现产品详情页
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-053  
**负责模块**: 前端页面

**任务描述**: 实现员工端产品详情页。

**验收标准**:
- [ ] 调用产品详情 API
- [ ] 显示产品完整信息
- [ ] 显示当前积分余额
- [ ] 实现兑换按钮
- [ ] 根据状态禁用按钮（下架/积分不足）
- [ ] 调用兑换 API
- [ ] 显示成功/错误提示
- [ ] 使用 Ant Design 样式

---

### TASK-055: 实现个人信息页
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现员工个人信息页。

**验收标准**:
- [ ] 调用个人信息 API
- [ ] 显示所有个人字段
- [ ] 只读显示（不可编辑）
- [ ] 使用 Ant Design 样式

---

### TASK-056: 实现积分余额页
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-050, TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现员工积分余额和日志页。

**验收标准**:
- [ ] 调用积分余额 API
- [ ] 显示当前积分
- [ ] 调用积分日志 API
- [ ] 表格显示日志列表
- [ ] 实现分页
- [ ] 使用 Ant Design 样式

---

### TASK-057: 实现兑换历史页
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-050, TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现员工兑换历史页。

**验收标准**:
- [ ] 调用订单列表 API
- [ ] 表格显示订单列表
- [ ] 显示产品信息、积分、状态
- [ ] 实现分页
- [ ] 点击查看详情
- [ ] 实现取消订单按钮（pending 状态）
- [ ] 使用 Ant Design 样式

---

### TASK-058: 实现订单详情页
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-057  
**负责模块**: 前端页面

**任务描述**: 实现员工订单详情页。

**验收标准**:
- [ ] 调用订单详情 API
- [ ] 显示订单完整信息
- [ ] 显示产品快照
- [ ] 显示审核信息
- [ ] 实现取消订单按钮
- [ ] 使用 Ant Design 样式

---

### TASK-059: 实现修改密码页
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-049, TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现员工修改密码页。

**验收标准**:
- [ ] 实现表单（旧密码、新密码、确认密码）
- [ ] 实现表单验证
- [ ] 调用修改密码 API
- [ ] 显示成功/错误提示
- [ ] 使用 Ant Design 样式


---

## 阶段十一：前端管理员端页面 (11 任务)

### TASK-060: 实现系统概况页
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现管理员系统概况页（首页）。

**验收标准**:
- [ ] 调用系统概况 API
- [ ] 卡片布局显示统计数据
- [ ] 显示所有统计指标
- [ ] 使用 Ant Design 样式

---

### TASK-061: 实现员工列表页
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-050, TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现管理员员工列表页。

**验收标准**:
- [ ] 调用员工列表 API
- [ ] 实现筛选表单（姓名、部门、岗位）
- [ ] 表格显示员工列表
- [ ] 实现分页
- [ ] 实现操作按钮（查看、编辑、重置密码）
- [ ] 实现创建员工按钮
- [ ] 使用 Ant Design 样式

---

### TASK-062: 实现创建员工页
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-049, TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现管理员创建员工页。

**验收标准**:
- [ ] 实现表单（所有必填字段）
- [ ] 实现表单验证
- [ ] 调用创建员工 API
- [ ] 显示成功/错误提示
- [ ] 成功后跳转到员工列表
- [ ] 使用 Ant Design 样式

---

### TASK-063: 实现员工详情/编辑页
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-061  
**负责模块**: 前端页面

**任务描述**: 实现管理员员工详情和编辑页。

**验收标准**:
- [ ] 调用员工详情 API
- [ ] 显示员工信息
- [ ] 实现编辑模式
- [ ] 工号不可编辑
- [ ] 调用更新员工 API
- [ ] 实现重置密码功能
- [ ] 显示成功/错误提示
- [ ] 使用 Ant Design 样式

---

### TASK-064: 实现产品列表页（管理员）
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-050, TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现管理员产品列表页。

**验收标准**:
- [ ] 调用产品列表 API（管理员）
- [ ] 表格显示产品列表
- [ ] 显示缩略图、名称、积分、状态
- [ ] 实现分页
- [ ] 实现操作按钮（编辑、删除、上架/下架）
- [ ] 实现创建产品按钮
- [ ] 使用 Ant Design 样式

---

### TASK-065: 实现创建产品页
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-049, TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现管理员创建产品页。

**验收标准**:
- [ ] 实现表单（名称、描述、积分、图片）
- [ ] 实现图片上传
- [ ] 实现表单验证
- [ ] 调用创建产品 API
- [ ] 显示成功/错误提示
- [ ] 成功后跳转到产品列表
- [ ] 使用 Ant Design 样式

---

### TASK-066: 实现产品详情/编辑页（管理员）
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-064  
**负责模块**: 前端页面

**任务描述**: 实现管理员产品详情和编辑页。

**验收标准**:
- [ ] 调用产品详情 API
- [ ] 显示产品信息
- [ ] 实现编辑模式
- [ ] 支持更新图片
- [ ] 调用更新产品 API
- [ ] 实现删除功能
- [ ] 实现上架/下架功能
- [ ] 显示成功/错误提示
- [ ] 使用 Ant Design 样式

---

### TASK-067: 实现发放积分页
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-049, TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现管理员发放积分页。

**验收标准**:
- [ ] 实现单个发放表单
- [ ] 实现批量发放表单
- [ ] 支持选择目标员工（列表、部门、岗位、全选）
- [ ] 实现表单验证
- [ ] 调用发放积分 API
- [ ] 调用批量发放积分 API
- [ ] 显示成功/错误提示
- [ ] 使用 Ant Design 样式

---

### TASK-068: 实现积分日志页（管理员）
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-050, TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现管理员积分日志页。

**验收标准**:
- [ ] 调用积分日志 API（管理员）
- [ ] 表格显示所有日志
- [ ] 显示用户、操作人、金额、原因、类型
- [ ] 实现分页
- [ ] 使用 Ant Design 样式

---

### TASK-069: 实现订单列表页（管理员）
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-050, TASK-051  
**负责模块**: 前端页面

**任务描述**: 实现管理员订单列表页。

**验收标准**:
- [ ] 调用订单列表 API（管理员）
- [ ] 实现状态筛选
- [ ] 表格显示订单列表
- [ ] 显示订单号、员工、产品、状态
- [ ] 实现分页
- [ ] 实现操作按钮（核销、拒绝、查看详情）
- [ ] 使用 Ant Design 样式

---

### TASK-070: 实现订单详情页（管理员）
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-069  
**负责模块**: 前端页面

**任务描述**: 实现管理员订单详情页。

**验收标准**:
- [ ] 调用订单详情 API
- [ ] 显示订单完整信息
- [ ] 显示员工和产品信息
- [ ] 实现核销功能（填写备注）
- [ ] 实现拒绝功能（填写原因）
- [ ] 调用核销/拒绝 API
- [ ] 显示成功/错误提示
- [ ] 使用 Ant Design 样式


---

## 阶段十二：测试 (5 任务)

### TASK-071: 编写用户模块单元测试
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-018  
**负责模块**: 测试

**任务描述**: 编写用户模块的单元测试。

**验收标准**:
- [ ] 测试创建员工（正常、达到上限）
- [ ] 测试工号生成
- [ ] 测试密码哈希和验证
- [ ] 测试用户认证
- [ ] 使用 sqlmock Mock 数据库
- [ ] 测试覆盖率 ≥ 60%

---

### TASK-072: 编写产品模块单元测试
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-027  
**负责模块**: 测试

**任务描述**: 编写产品模块的单元测试。

**验收标准**:
- [ ] 测试创建产品
- [ ] 测试更新产品
- [ ] 测试软删除产品
- [ ] 测试上架/下架产品
- [ ] 使用 sqlmock Mock 数据库
- [ ] 测试覆盖率 ≥ 60%

---

### TASK-073: 编写积分模块单元测试
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-033  
**负责模块**: 测试

**任务描述**: 编写积分模块的单元测试。

**验收标准**:
- [ ] 测试发放积分
- [ ] 测试扣除积分
- [ ] 测试批量发放积分
- [ ] 测试积分日志记录
- [ ] 使用 sqlmock Mock 数据库
- [ ] 测试覆盖率 ≥ 60%

---

### TASK-074: 编写订单模块单元测试
**优先级**: P2  
**工作量**: L (3天)  
**依赖**: TASK-041  
**负责模块**: 测试

**任务描述**: 编写订单模块的单元测试。

**验收标准**:
- [ ] 测试创建订单（正常、积分不足、产品下架）
- [ ] 测试取消订单（正常、状态不允许）
- [ ] 测试核销订单
- [ ] 测试拒绝订单
- [ ] 测试事务回滚
- [ ] 使用 sqlmock Mock 数据库
- [ ] 测试覆盖率 ≥ 60%

---

### TASK-075: 执行测试并达到覆盖率目标
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-071, TASK-072, TASK-073, TASK-074  
**负责模块**: 测试

**任务描述**: 执行所有测试并确保覆盖率达标。

**验收标准**:
- [ ] 运行所有单元测试
- [ ] 所有测试通过
- [ ] 生成覆盖率报告
- [ ] 整体覆盖率 ≥ 60%
- [ ] 修复失败的测试

**技术要点**:
```bash
go test ./... -cover
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out
```

---

## 阶段十三：部署和文档 (6 任务)

### TASK-076: 编写数据库迁移脚本
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: TASK-003  
**负责模块**: 部署

**任务描述**: 编写完整的数据库迁移脚本。

**验收标准**:
- [ ] 编写 schema.sql（所有表结构）
- [ ] 包含所有索引和外键
- [ ] 包含注释
- [ ] 测试脚本执行

---

### TASK-077: 编写种子数据脚本
**优先级**: P0  
**工作量**: S (1天)  
**依赖**: TASK-076  
**负责模块**: 部署

**任务描述**: 编写种子数据脚本。

**验收标准**:
- [ ] 编写 seed.sql
- [ ] 插入 admin 管理员账号
- [ ] 插入 9 个示例产品
- [ ] admin 密码使用 bcrypt 哈希
- [ ] 测试脚本执行

---

### TASK-078: 配置 Docker Compose
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-076, TASK-077  
**负责模块**: 部署

**任务描述**: 配置 Docker Compose 用于本地开发。

**验收标准**:
- [ ] 编写 docker-compose.yml
- [ ] 配置 MySQL 服务
- [ ] 配置后端服务
- [ ] 配置前端服务
- [ ] 配置网络和卷
- [ ] 测试 Docker Compose 启动
- [ ] 验证服务间通信

---

### TASK-079: 编写部署文档
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-078  
**负责模块**: 文档

**任务描述**: 编写详细的部署文档。

**验收标准**:
- [ ] 编写 DEPLOYMENT.md
- [ ] 包含环境要求
- [ ] 包含本地开发部署步骤
- [ ] 包含生产环境部署步骤
- [ ] 包含数据库初始化步骤
- [ ] 包含常见问题解决方案

---

### TASK-080: 编写 API 文档
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-043  
**负责模块**: 文档

**任务描述**: 使用 Swagger 生成 API 文档。

**验收标准**:
- [ ] 为所有 API 添加 Swagger 注释
- [ ] 配置 Swagger UI
- [ ] 生成 API 文档
- [ ] 包含所有接口说明
- [ ] 包含请求/响应示例
- [ ] 包含错误码说明
- [ ] 测试文档访问

---

### TASK-081: 编写项目 README
**优先级**: P2  
**工作量**: S (1天)  
**依赖**: TASK-079, TASK-080  
**负责模块**: 文档

**任务描述**: 编写项目 README 文档。

**验收标准**:
- [ ] 编写 README.md
- [ ] 包含项目介绍
- [ ] 包含技术栈说明
- [ ] 包含快速开始指南
- [ ] 包含项目结构说明
- [ ] 包含开发指南
- [ ] 包含部署指南链接
- [ ] 包含 API 文档链接

---

## 阶段十四：验收和上线 (4 任务)

### TASK-082: 功能验收测试
**优先级**: P0  
**工作量**: L (3天)  
**依赖**: TASK-070  
**负责模块**: 测试

**任务描述**: 执行完整的功能验收测试。

**验收标准**:
- [ ] 测试所有员工端功能
- [ ] 测试所有管理员端功能
- [ ] 测试所有 API 接口
- [ ] 测试边界情况
- [ ] 测试错误处理
- [ ] 记录测试结果
- [ ] 修复发现的 bug

---

### TASK-083: 性能测试
**优先级**: P2  
**工作量**: M (2天)  
**依赖**: TASK-082  
**负责模块**: 测试

**任务描述**: 执行性能测试。

**验收标准**:
- [ ] 测试 API 响应时间
- [ ] 测试并发用户支持
- [ ] 测试数据库查询性能
- [ ] 测试文件上传性能
- [ ] 记录性能指标
- [ ] 优化性能瓶颈

---

### TASK-084: 安全检查
**优先级**: P1  
**工作量**: M (2天)  
**依赖**: TASK-082  
**负责模块**: 安全

**任务描述**: 执行安全检查。

**验收标准**:
- [ ] 检查密码存储安全
- [ ] 检查 JWT 配置安全
- [ ] 检查 SQL 注入防护
- [ ] 检查 XSS 防护
- [ ] 检查 CSRF 防护
- [ ] 检查文件上传安全
- [ ] 修复安全问题

---

### TASK-085: 生产环境部署
**优先级**: P0  
**工作量**: M (2天)  
**依赖**: TASK-082, TASK-083, TASK-084  
**负责模块**: 部署

**任务描述**: 部署到生产环境。

**验收标准**:
- [ ] 准备生产服务器
- [ ] 部署数据库
- [ ] 部署后端服务
- [ ] 部署前端服务
- [ ] 配置环境变量
- [ ] 执行数据库迁移
- [ ] 验证部署成功
- [ ] 测试生产环境功能

---

## 5. 任务依赖关系图

```
阶段一（项目初始化）
├── TASK-001 → TASK-002
├── TASK-001 → TASK-003
└── TASK-002, TASK-003 → 阶段二

阶段二（后端基础设施）
├── TASK-004 → TASK-005, TASK-006, TASK-008
├── TASK-005 → TASK-007
└── TASK-007 → 阶段三

阶段三（用户认证）
├── TASK-009 → TASK-010, TASK-011
└── TASK-009 → 阶段四

阶段四（用户管理）
├── TASK-012 → TASK-013
├── TASK-013 → TASK-014, TASK-015, TASK-016, TASK-017, TASK-018
└── TASK-013 → 阶段五, 阶段六, 阶段七

阶段五（产品管理）
├── TASK-019 → TASK-020, TASK-021
├── TASK-021 → TASK-022, TASK-023, TASK-024, TASK-025, TASK-026, TASK-027
└── TASK-023 → 阶段七

阶段六（积分管理）
├── TASK-028, TASK-029, TASK-030
├── TASK-031 → TASK-032, TASK-033
└── TASK-031 → 阶段七

阶段七（订单管理）
├── TASK-034 → TASK-035
├── TASK-035 → TASK-036, TASK-037, TASK-038, TASK-039
├── TASK-039 → TASK-040, TASK-041
└── TASK-035 → 阶段八

阶段八（系统概况）
├── TASK-042, TASK-043
└── 阶段八 → 阶段九

阶段九（前端基础）
├── TASK-044 → TASK-045, TASK-049, TASK-050
├── TASK-045 → TASK-046
├── TASK-046, TASK-008 → TASK-047
├── TASK-047 → TASK-048
├── TASK-046, TASK-048 → TASK-051
└── 阶段九 → 阶段十, 阶段十一

阶段十（员工端页面）
├── TASK-052 → TASK-053
├── TASK-053 → TASK-054
├── TASK-055, TASK-056, TASK-057, TASK-058, TASK-059
└── TASK-057 → TASK-058

阶段十一（管理员端页面）
├── TASK-060, TASK-061, TASK-064, TASK-067, TASK-068, TASK-069
├── TASK-061 → TASK-062, TASK-063
├── TASK-064 → TASK-065, TASK-066
└── TASK-069 → TASK-070

阶段十二（测试）
├── TASK-071, TASK-072, TASK-073, TASK-074
└── TASK-071~074 → TASK-075

阶段十三（部署和文档）
├── TASK-076 → TASK-077 → TASK-078
├── TASK-078 → TASK-079
├── TASK-043 → TASK-080
└── TASK-079, TASK-080 → TASK-081

阶段十四（验收和上线）
├── TASK-070 → TASK-082
├── TASK-082 → TASK-083, TASK-084
└── TASK-082, TASK-083, TASK-084 → TASK-085
```

## 6. 工作量统计

| 阶段 | 任务数 | 总工作量（天） |
|------|--------|----------------|
| 阶段一：项目初始化 | 3 | 3 |
| 阶段二：后端基础设施 | 5 | 7.5 |
| 阶段三：用户认证模块 | 3 | 3.5 |
| 阶段四：用户管理模块 | 7 | 11 |
| 阶段五：产品管理模块 | 9 | 14.5 |
| 阶段六：积分管理模块 | 6 | 9 |
| 阶段七：订单管理模块 | 8 | 14.5 |
| 阶段八：系统概况模块 | 2 | 2.5 |
| 阶段九：前端基础设施 | 8 | 12 |
| 阶段十：前端员工端页面 | 8 | 13 |
| 阶段十一：前端管理员端页面 | 11 | 22 |
| 阶段十二：测试 | 5 | 10 |
| 阶段十三：部署和文档 | 6 | 9 |
| 阶段十四：验收和上线 | 4 | 9 |
| **总计** | **85** | **141** |

**预估总工期**: 约 28-30 周（按每周 5 个工作日计算）

## 7. 关键路径

关键路径（最长依赖链）：
```
TASK-001 → TASK-002 → TASK-004 → TASK-005 → TASK-007 → TASK-009 → 
TASK-012 → TASK-013 → TASK-019 → TASK-021 → TASK-023 → TASK-034 → 
TASK-035 → TASK-044 → TASK-045 → TASK-046 → TASK-047 → TASK-048 → 
TASK-051 → TASK-052 → TASK-053 → TASK-054 → TASK-070 → TASK-082 → 
TASK-085
```

**关键路径工作量**: 约 40 天

## 8. 审批记录

| 角色 | 姓名 | 审批状态 | 审批日期 | 备注 |
|------|------|----------|----------|------|
| 技术负责人 | | 待审批 | | |
| 项目经理 | | 待审批 | | |
| 产品经理 | | 待审批 | | |

---

**文档结束**
