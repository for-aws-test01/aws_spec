# AWSomeShop 需求文档

## 文档信息

- **项目名称**: AWSomeShop 内部员工福利电商系统
- **文档版本**: 3.0 (超级简化版)
- **创建日期**: 2026-01-14
- **更新日期**: 2026-01-14
- **文档状态**: 待审批
- **项目类型**: MVP（最小可行产品）
- **变更说明**: v3.0 删除35个任务，工作量减少70%

## 1. 项目概述

### 1.1 项目背景
构建一个名为 AWSomeShop 的内部员工福利电商网站，旨在通过最小可行产品（MVP）验证员工积分兑换系统的商业模式。

### 1.2 项目目标
- 为员工提供使用"AWSome积分"浏览和兑换预选产品的平台
- 为管理员提供产品管理和积分管理的后台系统
- 验证积分兑换系统的可行性和员工接受度

### 1.3 项目范围
本项目为 MVP 超级简化版，仅保留最核心功能：
- 员工端：产品浏览、产品兑换、订单查看、积分余额显示
- 管理员端：员工创建、产品创建、积分发放、订单核销

### 1.4 删除的功能（v3.0）
为加速 MVP 开发，以下功能已删除：
- ❌ 所有单元测试
- ❌ 审计日志系统
- ❌ 应用日志系统
- ❌ 图片上传功能（改用URL输入）
- ❌ 系统概况页
- ❌ 个人信息页
- ❌ 修改密码功能
- ❌ 重置密码功能
- ❌ 批量发放积分
- ❌ 扣除积分功能
- ❌ 积分日志查看
- ❌ 订单详情页
- ❌ 员工详情/编辑页
- ❌ 产品详情/编辑页（管理员）
- ❌ 产品上架/下架功能
- ❌ 产品软删除
- ❌ 订单拒绝功能
- ❌ 订单取消功能
- ❌ Docker部署
- ❌ Swagger文档
- ❌ 性能测试

### 1.5 目标用户
- **员工**: 约 1000 名内部员工
- **管理员**: 负责系统管理和运营的管理人员

## 2. 用户角色定义

### 2.1 员工（Employee）
**角色描述**: 使用积分兑换产品的内部员工

**主要职责**:
- 浏览和查看产品信息
- 使用积分兑换产品
- 查看个人积分余额（导航栏显示）
- 查看个人兑换订单列表

**访问权限**:
- 查看所有产品
- 查看个人积分余额
- 查看个人兑换订单

### 2.2 管理员（Administrator）
**角色描述**: 负责系统管理和运营的管理人员

**主要职责**:
- 创建员工账号
- 创建产品
- 发放员工积分
- 核销员工兑换订单

**访问权限**:
- 所有管理员拥有相同的全部管理权限

## 3. 功能需求

### 3.1 用户认证与授权

#### FR-AUTH-001: 员工登录
**需求描述**: 员工使用工号和密码登录系统

**验收标准（EARS）**:
- WHEN 员工输入正确的工号和密码 THEN 系统应允许登录并跳转到产品列表页
- WHEN 员工输入错误的工号或密码 THEN 系统应显示错误提示信息
- WHEN 员工成功登录 THEN 系统应创建会话，有效期为 24 小时

**优先级**: 高
**依赖**: 无

#### FR-AUTH-002: 管理员登录
**需求描述**: 管理员使用工号和密码登录系统

**验收标准（EARS）**:
- WHEN 管理员输入正确的工号和密码 THEN 系统应允许登录并跳转到订单列表页
- WHEN 管理员输入错误的工号或密码 THEN 系统应显示错误提示信息
- WHEN 管理员成功登录 THEN 系统应创建会话，有效期为 24 小时

**优先级**: 高
**依赖**: 无

#### FR-AUTH-003: 会话管理
**需求描述**: 系统管理用户登录会话

**验收标准（EARS）**:
- WHEN 用户登录成功 THEN 系统应创建会话，有效期为 24 小时
- WHEN 会话过期 THEN 系统应要求用户重新登录
- WHEN 用户主动登出 THEN 系统应立即销毁会话

**优先级**: 高
**依赖**: FR-AUTH-001, FR-AUTH-002

### 3.2 员工管理

#### FR-EMP-001: 创建员工账号
**需求描述**: 管理员可以创建员工账号

**验收标准（EARS）**:
- WHEN 管理员创建员工账号 THEN 系统应要求填写：姓名、部门、岗位、邮箱、手机号、入职时间、初始密码
- WHEN 员工账号创建成功 THEN 系统应自动生成工号并为该员工发放 1000 积分
- WHERE 工号格式为 YYYYMMDD-NNN（自动生成）
- WHERE 所有员工默认状态为"在职"

**优先级**: 高
**依赖**: FR-AUTH-002

#### FR-EMP-002: 查看员工列表
**需求描述**: 管理员可以查看员工列表

**验收标准（EARS）**:
- WHEN 管理员查看员工列表 THEN 系统应显示所有员工信息
- WHERE 列表采用分页显示，每页 50 条记录
- WHERE 列表按创建时间倒序排列

**优先级**: 中
**依赖**: FR-EMP-001

### 3.3 产品管理

#### FR-PROD-001: 创建产品
**需求描述**: 管理员可以创建产品

**验收标准（EARS）**:
- WHEN 管理员创建产品 THEN 系统应要求填写：名称、描述、图片URL、所需积分
- WHERE 产品名称长度不超过 100 个字符
- WHERE 产品描述长度不超过 2000 个字符
- WHERE 图片URL为外部链接
- WHERE 新创建的产品立即可用

**优先级**: 高
**依赖**: FR-AUTH-002

#### FR-PROD-002: 查看产品列表（管理员）
**需求描述**: 管理员可以查看产品列表

**验收标准（EARS）**:
- WHEN 管理员查看产品列表 THEN 系统应显示所有产品
- WHERE 产品列表按创建时间倒序排列
- WHERE 列表采用分页显示，每页 50 条记录

**优先级**: 中
**依赖**: FR-PROD-001

#### FR-PROD-003: 查看产品列表（员工）
**需求描述**: 员工可以浏览产品列表

**验收标准（EARS）**:
- WHEN 员工登录后 THEN 系统应显示产品列表作为首页
- WHEN 员工查看产品列表 THEN 系统应显示所有产品
- WHERE 产品列表按创建时间倒序排列
- WHERE 列表采用分页显示，每页 50 条记录

**优先级**: 高
**依赖**: FR-AUTH-001, FR-PROD-001

#### FR-PROD-004: 查看产品详情（员工）
**需求描述**: 员工可以查看产品详细信息并兑换

**验收标准（EARS）**:
- WHEN 员工点击产品 THEN 系统应显示产品详情页
- WHEN 员工查看产品详情 THEN 系统应显示：名称、描述、图片、所需积分
- WHEN 员工积分不足 THEN 系统应显示"积分不足"提示并禁用兑换按钮
- WHEN 员工积分充足 THEN 系统应显示兑换按钮

**优先级**: 高
**依赖**: FR-PROD-003

### 3.4 积分管理

#### FR-POINT-001: 入职积分发放
**需求描述**: 系统在创建员工账号时自动发放入职积分

**验收标准（EARS）**:
- WHEN 管理员创建员工账号 THEN 系统应自动为该员工发放 1000 积分
- WHEN 积分发放成功 THEN 系统应记录积分日志，变动类型为"入职发放"

**优先级**: 高
**依赖**: FR-EMP-001

#### FR-POINT-002: 管理员发放积分
**需求描述**: 管理员可以为员工发放积分

**验收标准（EARS）**:
- WHEN 管理员发放积分 THEN 系统应要求填写：目标员工、积分数量、发放原因
- WHEN 积分发放成功 THEN 系统应更新员工积分余额并记录积分日志
- WHERE 积分数量无上限
- WHERE 积分最小单位为 1

**优先级**: 高
**依赖**: FR-AUTH-002

#### FR-POINT-003: 查看积分余额（员工）
**需求描述**: 员工可以在导航栏查看自己的积分余额

**验收标准（EARS）**:
- WHEN 员工登录后 THEN 系统应在导航栏显示当前积分总额
- WHERE 积分余额实时更新

**优先级**: 高
**依赖**: FR-AUTH-001

#### FR-POINT-004: 积分日志记录
**需求描述**: 系统记录所有积分变动操作

**验收标准（EARS）**:
- WHEN 发生积分变动 THEN 系统应记录：操作时间、操作人、员工、积分变动数量、变动原因、变动类型
- WHERE 变动类型包括：入职发放、管理员发放、兑换消费

**优先级**: 高
**依赖**: 所有涉及积分变动的功能

### 3.5 产品兑换

#### FR-REDEEM-001: 提交兑换申请
**需求描述**: 员工可以使用积分兑换产品

**验收标准（EARS）**:
- WHEN 员工点击兑换按钮 THEN 系统应验证员工积分是否充足
- WHEN 员工积分不足 THEN 系统应拒绝兑换并提示"积分不足"
- WHEN 员工积分充足 THEN 系统应立即扣除积分并创建兑换订单
- WHEN 兑换订单创建成功 THEN 系统应生成订单号（时间戳+随机数）
- WHEN 兑换订单创建成功 THEN 订单状态为"待核销"
- WHERE 员工一次只能兑换一个产品
- WHERE 同一产品可以多次兑换，无次数限制

**优先级**: 高
**依赖**: FR-AUTH-001, FR-PROD-004, FR-POINT-003

#### FR-REDEEM-002: 查看兑换订单（员工）
**需求描述**: 员工可以查看自己的兑换订单列表

**验收标准（EARS）**:
- WHEN 员工查看兑换订单 THEN 系统应显示订单信息：订单号、产品信息、所需积分、订单状态、申请时间
- WHERE 订单列表按创建时间倒序排列
- WHERE 订单列表采用分页显示，每页 50 条记录

**优先级**: 高
**依赖**: FR-REDEEM-001

### 3.6 订单审核

#### FR-ORDER-001: 查看订单列表
**需求描述**: 管理员可以查看订单列表

**验收标准（EARS）**:
- WHEN 管理员查看订单列表 THEN 系统应显示所有兑换订单
- WHERE 订单列表按创建时间倒序排列
- WHERE 订单列表采用分页显示，每页 50 条记录
- WHERE 订单列表显示：订单号、员工姓名、产品名称、积分、状态、申请时间

**优先级**: 高
**依赖**: FR-AUTH-002

#### FR-ORDER-002: 核销订单
**需求描述**: 管理员可以在订单列表直接核销订单

**验收标准（EARS）**:
- WHEN 管理员点击核销按钮 THEN 系统应立即更新订单状态为"已核销"
- WHEN 核销成功 THEN 系统应记录审核时间和审核人
- WHERE 核销操作不需要填写备注

**优先级**: 高
**依赖**: FR-ORDER-001

#### FR-ORDER-003: 订单状态管理
**需求描述**: 系统管理订单的状态流转

**验收标准（EARS）**:
- WHERE 订单状态包括：待核销、已核销
- WHEN 订单创建 THEN 初始状态为"待核销"
- WHEN 管理员核销 THEN 状态变更为"已核销"
- WHERE 订单历史永久保留

**优先级**: 高
**依赖**: FR-REDEEM-001

## 4. 非功能性需求

### 4.1 性能需求

#### NFR-PERF-001: 响应时间
**需求描述**: 系统应满足响应时间要求

**验收标准（EARS）**:
- WHEN 用户访问任何页面 THEN 页面加载时间应小于 5 秒

**优先级**: 中

#### NFR-PERF-002: 并发用户
**需求描述**: 系统应支持预期的用户规模

**验收标准（EARS）**:
- WHERE 系统应支持 1000 名用户
- WHEN 系统达到 1000 并发用户 THEN 系统应保持正常运行

**优先级**: 中

### 4.2 可用性需求

#### NFR-AVAIL-001: 系统可用性
**需求描述**: 系统应保持高可用性

**验收标准（EARS）**:
- WHERE 系统应提供 7x24 小时服务

**优先级**: 高

### 4.3 安全性需求

#### NFR-SEC-001: 密码存储
**需求描述**: 系统应安全存储用户密码

**验收标准（EARS）**:
- WHERE 密码应使用哈希算法存储，不得明文存储

**优先级**: 高

#### NFR-SEC-002: 会话安全
**需求描述**: 系统应保护用户会话安全

**验收标准（EARS）**:
- WHERE 会话令牌应使用安全的随机生成算法
- WHERE 会话过期后应立即失效

**优先级**: 高

### 4.4 可维护性需求

#### NFR-MAINT-001: 数据完整性
**需求描述**: 系统应保持数据完整性

**验收标准（EARS）**:
- WHERE 所有历史数据应永久保留
- WHERE 删除操作应使用软删除，保留数据记录

**优先级**: 高

### 4.5 兼容性需求

#### NFR-COMPAT-001: 浏览器兼容性
**需求描述**: 系统应支持主流浏览器

**验收标准（EARS）**:
- WHERE 系统应支持 Chrome、Firefox、Safari、Edge 最新版本
- WHERE 不需要支持移动设备访问
- WHERE 不需要响应式设计

**优先级**: 中

### 4.6 部署需求

#### NFR-DEPLOY-001: 部署环境
**需求描述**: 系统应支持本地部署

**验收标准（EARS）**:
- WHERE 系统应支持本地服务器部署
- WHERE 不需要云平台支持

**优先级**: 高

## 5. 数据模型

### 5.1 用户实体

#### 用户（User）
- 用户ID（主键）
- 工号（唯一，自动生成）
- 姓名
- 部门
- 岗位
- 邮箱
- 手机号
- 入职时间
- 密码（哈希存储）
- 角色（员工/管理员）
- 积分余额
- 创建时间
- 更新时间

### 5.2 产品实体

#### 产品（Product）
- 产品ID（主键）
- 产品名称（最大100字符）
- 产品描述（最大2000字符）
- 产品图片URL（外部链接）
- 所需积分
- 创建时间
- 更新时间

### 5.3 订单实体

#### 兑换订单（Order）
- 订单ID（主键）
- 订单号（时间戳+随机数）
- 员工ID（外键）
- 产品ID（外键）
- 产品快照（JSON，保存兑换时的产品信息）
- 所需积分
- 订单状态（待核销/已核销）
- 申请时间
- 审核时间
- 审核人ID（外键）
- 创建时间
- 更新时间

### 5.4 积分日志实体

#### 积分日志（PointLog）
- 日志ID（主键）
- 员工ID（外键）
- 操作人ID（外键，可为空）
- 积分变动数量（正数为增加，负数为减少）
- 变动原因
- 变动类型（入职发放/管理员发放/兑换消费）
- 关联订单ID（外键，可为空）
- 操作时间
- 创建时间

## 6. 业务规则

### 6.1 积分规则
1. 新员工入职时自动获得 1000 积分
2. 积分最小单位为 1，不支持小数
3. 积分无有效期，永久有效
4. 积分无上限

### 6.2 兑换规则
1. 员工一次只能兑换一个产品
2. 同一产品可以多次兑换，无次数限制
3. 兑换时立即扣除积分
4. 兑换后不可取消

### 6.3 订单规则
1. 订单创建后状态为"待核销"
2. 订单历史永久保留
3. 订单号格式：时间戳+随机数

### 6.4 权限规则
1. 所有管理员拥有相同的全部管理权限

### 6.5 产品规则
1. 产品创建后立即可用
2. 产品不可删除（保持数据完整性）

## 7. 用户故事

### 7.1 员工用户故事

#### US-EMP-001: 员工登录系统
**作为** 员工
**我想要** 使用工号和密码登录系统
**以便** 访问产品兑换平台

**验收标准**:
- 输入正确的工号和密码后可以成功登录
- 登录后跳转到产品列表页
- 会话有效期为 24 小时

#### US-EMP-002: 员工浏览产品
**作为** 员工
**我想要** 浏览可兑换的产品列表
**以便** 选择我感兴趣的产品

**验收标准**:
- 登录后首页显示产品列表
- 可以看到所有产品（包括已上架和已下架）
- 产品按创建时间倒序排列
- 支持分页显示，每页 50 条

#### US-EMP-003: 员工查看产品详情
**作为** 员工
**我想要** 查看产品的详细信息
**以便** 了解产品是否符合我的需求

**验收标准**:
- 可以查看产品名称、描述、图片、所需积分、上架状态
- 下架产品显示"已下架"标记
- 积分不足时显示"积分不足"提示

#### US-EMP-004: 员工兑换产品
**作为** 员工
**我想要** 使用积分兑换产品
**以便** 获得福利商品

**验收标准**:
- 积分充足且产品已上架时可以兑换
- 兑换时立即扣除积分
- 兑换成功后创建订单，状态为"待核销"
- 生成唯一订单号

#### US-EMP-005: 员工查看积分余额
**作为** 员工
**我想要** 查看我的积分余额和明细
**以便** 了解我的积分情况

**验收标准**:
- 可以查看当前积分总额
- 可以查看积分变动记录
- 积分明细按时间倒序排列
- 支持分页显示

#### US-EMP-006: 员工管理兑换订单
**作为** 员工
**我想要** 查看和管理我的兑换订单
**以便** 跟踪订单状态

**验收标准**:
- 可以查看所有订单信息
- 可以取消"待核销"状态的订单
- 取消订单后积分立即退回

#### US-EMP-007: 员工修改密码
**作为** 员工
**我想要** 修改我的登录密码
**以便** 保护账号安全

**验收标准**:
- 需要输入旧密码验证
- 输入新密码后可以成功修改
- 修改成功后提示成功信息

### 7.2 管理员用户故事

#### US-ADMIN-001: 管理员登录系统
**作为** 管理员
**我想要** 使用工号和密码登录系统
**以便** 访问管理后台

**验收标准**:
- 输入正确的工号和密码后可以成功登录
- 登录后跳转到系统概况页
- 会话有效期为 24 小时

#### US-ADMIN-002: 管理员查看系统概况
**作为** 管理员
**我想要** 查看系统运营数据
**以便** 了解系统使用情况

**验收标准**:
- 可以查看员工总数、产品总数
- 可以查看待审核订单数量
- 可以查看今日/本月兑换订单数量
- 可以查看今日/本月积分发放总量

#### US-ADMIN-003: 管理员管理产品
**作为** 拥有"管理产品"权限的管理员
**我想要** 创建、编辑、删除产品
**以便** 维护产品库

**验收标准**:
- 可以创建新产品并填写所有必要信息
- 可以编辑现有产品信息
- 可以删除产品（软删除）
- 可以上架/下架产品

#### US-ADMIN-004: 管理员管理员工
**作为** 拥有"管理员工账号"权限的管理员
**我想要** 创建、编辑员工账号
**以便** 管理员工信息

**验收标准**:
- 可以创建新员工账号并自动发放 1000 积分
- 可以编辑员工信息（除工号外）
- 可以禁用员工账号
- 可以重置员工密码

#### US-ADMIN-005: 管理员管理积分
**作为** 拥有"发放/扣除积分"权限的管理员
**我想要** 为员工发放或扣除积分
**以便** 实施积分激励政策

**验收标准**:
- 可以为单个员工发放/扣除积分
- 可以批量发放积分（支持多种选择方式）
- 需要填写发放/扣除原因
- 操作后记录积分日志

#### US-ADMIN-006: 管理员审核订单
**作为** 管理员
**我想要** 审核员工的兑换订单
**以便** 完成产品核销

**验收标准**:
- 可以查看待审核订单列表
- 可以核销订单并填写备注
- 可以拒绝订单并填写原因
- 拒绝订单后积分自动退回

#### US-ADMIN-007: 管理员管理其他管理员
**作为** 管理员
**我想要** 创建和管理其他管理员账号
**以便** 扩展管理团队

**验收标准**:
- 可以创建新管理员账号
- 可以编辑管理员信息
- 所有管理员拥有相同的全部权限

## 8. 系统约束

### 8.1 技术约束
- 系统必须支持本地部署
- 不需要云平台支持
- 不需要与现有系统集成

### 8.2 业务约束
- 本项目为 MVP 版本，功能范围受限
- 预算和资源无限制
- 目标用户规模为 1000 人

### 8.3 时间约束
- 本文档定义的是 MVP 版本需求
- 后续版本可能扩展功能

## 9. 假设和依赖

### 9.1 假设
- 员工和管理员都具备基本的计算机操作能力
- 用户使用主流浏览器访问系统
- 网络环境稳定

### 9.2 依赖
- 需要服务器环境支持系统部署
- 需要数据库支持数据存储

## 10. 验收标准总结

本需求文档使用 EARS（Easy Approach to Requirements Syntax）模式编写验收标准，确保需求的可测试性和明确性。所有功能需求都包含清晰的验收标准，符合 INCOSE 质量规则：
- 完整性：覆盖所有功能场景
- 一致性：需求之间无冲突
- 可验证性：所有需求可测试
- 必要性：所有需求都支持项目目标
- 可行性：所有需求在技术上可实现

## 11. 审批记录

| 角色 | 姓名 | 审批状态 | 审批日期 | 备注 |
|------|------|----------|----------|------|
| 产品经理 | | 待审批 | | |
| 技术负责人 | | 待审批 | | |
| 项目经理 | | 待审批 | | |

---

**文档结束**
