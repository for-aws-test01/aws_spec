# AWSomeShop 设计规划文档

## 项目概述
基于已批准的需求文档，为 AWSomeShop 内部员工福利电商系统创建详细的技术设计方案。

## 设计阶段目标
1. 确定系统架构和技术栈
2. 设计数据库模式
3. 定义 API 接口规范
4. 设计前端页面结构
5. 制定安全策略
6. 规划部署方案

---

## 设计步骤

### 第一阶段：技术栈选择
- [ ] 1. 确定后端技术栈
- [ ] 2. 确定前端技术栈
- [ ] 3. 确定数据库选型
- [ ] 4. 确定其他基础设施

### 第二阶段：系统架构设计
- [ ] 5. 设计整体系统架构
- [ ] 6. 设计模块划分
- [ ] 7. 设计接口规范

### 第三阶段：数据库设计
- [ ] 8. 设计数据库表结构
- [ ] 9. 设计索引策略
- [ ] 10. 设计数据迁移方案

### 第四阶段：前端设计
- [ ] 11. 设计页面结构和导航
- [ ] 12. 设计 UI 组件
- [ ] 13. 设计状态管理

### 第五阶段：安全和性能设计
- [ ] 14. 设计认证授权机制
- [ ] 15. 设计性能优化策略
- [ ] 16. 设计错误处理机制

### 第六阶段：部署和运维设计
- [ ] 17. 设计部署架构
- [ ] 18. 设计监控和日志方案

---

## 需要澄清的问题

### 关于技术栈选择

**[Question 1.1]** 后端开发语言和框架偏好？
- 选项：
  - Python (Django/Flask/FastAPI)
  - Node.js (Express/NestJS)
  - Java (Spring Boot)
  - Go (Gin/Echo)
  - 其他

**[Answer]**Gin

**[Question 1.2]** 前端框架偏好？
- 选项：
  - React
  - Vue.js
  - Angular
  - 原生 HTML/CSS/JavaScript
  - 其他

**[Answer]**原生

**[Question 1.3]** 数据库选型？
- 选项：
  - MySQL
  - PostgreSQL
  - SQLite
  - MongoDB
  - 其他

**[Answer]**MySQL

**[Question 1.4]** 是否需要使用 ORM 框架？如果需要，偏好哪个？
- 例如：SQLAlchemy (Python)、TypeORM (Node.js)、Hibernate (Java)

**[Answer]**gorm

---

### 关于系统架构

**[Question 2.1]** 系统架构模式偏好？
- 选项：
  - 单体应用（Monolithic）
  - 前后端分离（Frontend + Backend API）
  - 微服务架构（Microservices）

**[Answer]**微服务架构（Microservices）

**[Question 2.2]** API 设计风格偏好？
- 选项：
  - RESTful API
  - GraphQL
  - gRPC
  - 其他

**[Answer]** RESTful API

**[Question 2.3]** 是否需要使用 API 文档工具？
- 例如：Swagger/OpenAPI、Postman、其他

**[Answer]**Swagger

---

### 关于认证和会话管理

**[Question 3.1]** 会话管理方式？
- 选项：
  - Session + Cookie
  - JWT (JSON Web Token)
  - OAuth 2.0
  - 其他

**[Answer]**JWT

**[Question 3.2]** 密码哈希算法？
- 选项：
  - bcrypt
  - Argon2
  - PBKDF2
  - scrypt
  - 其他

**[Answer]**随意

**[Question 3.3]** 是否需要实现"记住登录状态"功能（尽管需求中说不需要"记住我"，但可能需要自动续期会话）？

**[Answer]**不需要

---

### 关于文件存储

**[Question 4.1]** 产品图片存储方式？
- 选项：
  - 本地文件系统
  - 对象存储服务（如 MinIO、本地 S3 兼容存储）
  - 数据库 BLOB
  - 其他

**[Answer]**本地文件系统

**[Question 4.2]** 图片上传时是否需要压缩或格式转换？

**[Answer]**不需要

**[Question 4.3]** 图片访问方式？
- 选项：
  - 直接文件路径访问
  - 通过 API 代理访问
  - CDN 加速
  - 其他

**[Answer]**通过 API 代理访问

---

### 关于前端设计

**[Question 5.1]** UI 设计风格偏好？
- 选项：
  - 使用 UI 组件库（如 Ant Design、Element UI、Material-UI、Bootstrap）
  - 自定义设计
  - 简约风格
  - 其他

**[Answer]**Ant Design

**[Question 5.2]** 是否需要支持暗色模式？

**[Answer]**不需要

**[Question 5.3]** 页面布局偏好？
- 选项：
  - 侧边栏导航
  - 顶部导航
  - 混合导航
  - 其他

**[Answer]**顶部导航

---

### 关于数据库设计

**[Question 6.1]** 订单号生成策略？
- 您提到"时间戳+随机数"，请明确：
  - 格式示例：20260114153045-ABC123？
  - 随机数长度：4位、6位、8位？
  - 是否需要包含业务前缀（如 ORD-）？

**[Answer]**20260114153045-ABC123

**[Question 6.2]** 产品快照存储格式？
- 订单中需要保存产品快照，存储为：
  - JSON 字符串
  - 单独的快照表
  - 其他

**[Answer]**JSON 字符串

**[Question 6.3]** 是否需要数据库事务支持？
- 例如：兑换产品时需要同时扣除积分、创建订单、记录日志

**[Answer]**不需要

---

### 关于性能优化

**[Question 7.1]** 是否需要实现缓存机制？
- 选项：
  - Redis
  - Memcached
  - 应用内存缓存
  - 不需要
  - 其他

**[Answer]**不需要

**[Question 7.2]** 哪些数据需要缓存？
- 例如：产品列表、员工信息、系统概况统计数据

**[Answer]**不需要

**[Question 7.3]** 分页查询是否需要优化？
- 例如：使用游标分页、缓存总数等

**[Answer]**不需要

---

### 关于日志和监控

**[Question 8.1]** 应用日志级别和存储？
- 日志级别：DEBUG、INFO、WARNING、ERROR
- 存储方式：文件、数据库、日志服务

**[Answer]**INFO；数据库

**[Question 8.2]** 是否需要操作审计日志（除了积分日志外）？
- 例如：记录管理员的所有操作（创建员工、修改产品等）

**[Answer]**需要

**[Question 8.3]** 是否需要性能监控？
- 例如：API 响应时间、数据库查询性能

**[Answer]**不需要

---

### 关于部署

**[Question 9.1]** 部署方式偏好？
- 选项：
  - Docker 容器化
  - 直接部署到服务器
  - 虚拟机
  - 其他

**[Answer]**本地部署

**[Question 9.2]** Web 服务器选择？
- 选项：
  - Nginx
  - Apache
  - 内置服务器（如 Uvicorn、Gunicorn）
  - 其他

**[Answer]**语言服务器

**[Question 9.3]** 是否需要反向代理？

**[Answer]**不需要

**[Question 9.4]** 数据库备份策略？
- 例如：每日备份、增量备份、备份保留时间

**[Answer]**不需要

---

### 关于开发和测试

**[Question 10.1]** 是否需要编写单元测试？

**[Answer]**需要

**[Question 10.2]** 是否需要编写集成测试？

**[Answer]**不需要

**[Question 10.3]** 是否需要 API 测试？

**[Answer]**不需要

**[Question 10.4]** 开发环境配置？
- 是否需要 Docker Compose 用于本地开发？
- 是否需要种子数据（seed data）？

**[Answer]**需要；需要

---

### 关于系统初始化

**[Question 11.1]** 系统初始化脚本？
- 是否需要自动创建 admin 账号的脚本？
- admin 账号的默认密码是什么？（建议首次登录后强制修改）

**[Answer]**需要；密码123456

**[Question 11.2]** 示例产品数据？
- 9 个示例产品的具体信息（名称、描述、所需积分）是否需要我设计，还是您提供？

**[Answer]**ai提供

---

### 关于错误处理

**[Question 12.1]** 错误响应格式？
- 是否需要统一的错误响应格式？
- 例如：`{"error": "错误信息", "code": "ERROR_CODE", "details": {}}`

**[Answer]**统一使用示例格式

**[Question 12.2]** 前端错误提示方式？
- 选项：
  - Toast 提示
  - Modal 弹窗
  - 页面内联提示
  - 其他

**[Answer]**Toast 提示

---

### 关于国际化

**[Question 13.1]** 虽然需求中说不需要多语言，但代码中是否需要预留国际化支持？

**[Answer]**不需要

---

### 关于数据验证

**[Question 14.1]** 数据验证策略？
- 前端验证：是否需要实时验证（如输入时验证）？
- 后端验证：是否使用验证库（如 Pydantic、Joi、class-validator）？

**[Answer]**不需要

**[Question 14.2]** 工号格式验证？
- 是否有特定的工号格式要求（如必须是数字、字母数字组合等）？

**[Answer]**年月日+编号（001）

---

### 追加问题 - 第一轮

#### 关于微服务架构

**[Question 15.1]** 您选择了微服务架构，请明确服务划分方式？
- 建议的服务划分：
  - 用户服务（员工和管理员管理）
  - 产品服务（产品管理）
  - 积分服务（积分管理和日志）
  - 订单服务（兑换订单管理）
  - 认证服务（登录和会话管理）
- 或者其他划分方式？

**[Answer]** 前端服务 + 后端服务（共2个服务）。后端服务包含所有业务逻辑。

**[Updated]** 基于您的最新说明，架构调整为：前端服务 + 后端服务（共2个服务），员工和管理员账号在同一个 users 表，通过 role 字段区分（employee/admin）。

**[Question 15.2]** 微服务之间的通信方式？
- 选项：
  - HTTP/REST API
  - gRPC
  - 消息队列（如 RabbitMQ、Kafka）
  - 其他

**[Answer]**REST API

**[Question 15.3]** 是否需要 API 网关？
- 用于统一入口、路由、认证等

**[Answer]** 不需要（基于前后端2服务架构）

**[Updated]** 基于前后端分离架构（仅2个服务），不需要 API 网关。前端直接调用后端 API。

**[Question 15.4]** 是否需要服务注册与发现？
- 例如：Consul、Etcd、Nacos

**[Answer]**不需要

---

#### 关于前端技术栈

**[Question 16.1]** 您选择了原生 HTML/CSS/JavaScript，但同时选择了 Ant Design。请明确：
- 是否使用 Ant Design 的原生版本（antd-mini 或 Web Components）？
- 还是使用 Ant Design + 构建工具（如 Webpack、Vite）？
- 或者只是参考 Ant Design 的设计风格，自己实现？

**[Answer]**使用 Ant Design + 构建工具（如 Webpack、Vite）

**[Question 16.2]** 前端是否需要使用构建工具？
- 例如：Webpack、Vite、Parcel、或不需要

**[Answer]**Webpack

**[Question 16.3]** 前端状态管理？
- 原生 JavaScript 如何管理应用状态（如用户登录状态、购物车等）？
- 是否使用 localStorage、sessionStorage？

**[Answer]**localStorage

---

#### 关于数据库事务

**[Question 17.1]** 您回答"不需要"数据库事务支持，但兑换产品时需要：
1. 扣除员工积分
2. 创建兑换订单
3. 记录积分日志

如果其中一步失败，如何保证数据一致性？
- 是否需要重新考虑使用事务？
- 还是接受可能的数据不一致？

**[Answer]**使用事务

---

#### 关于操作审计日志

**[Question 18.1]** 您提到需要操作审计日志，请明确：
- 需要记录哪些操作？（创建员工、修改产品、删除产品、发放积分、扣除积分、审核订单等）
- 审计日志存储在哪里？（单独的表、文件、还是日志服务）
- 审计日志需要记录哪些信息？（操作人、操作时间、操作类型、操作对象、操作前后的数据等）

**[Answer]**记录创建员工、修改产品、删除产品、发放积分、扣除积分、审核订单；存储独立表；记录操作人、操作时间、操作类型、操作对象、操作前后的数据

**[Question 18.2]** 审计日志是否需要查询功能？
- 管理员是否可以查看审计日志？
- 是否需要按时间、操作人、操作类型筛选？

**[Answer]**不需要

---

#### 关于工号格式

**[Question 19.1]** 您提到工号格式为"年月日+编号（001）"，请明确：
- 格式示例：20260114001？
- 编号是否每天重新从 001 开始？
- 还是全局递增（如 20260114001、20260114002...20260115003）？
- 编号位数固定为 3 位吗？

**[Answer]**20260114-001；每天重新从 001 开始；固定3位

**[Question 19.2]** 工号生成逻辑？
- 是否需要自动生成工号？
- 还是管理员手动输入？

**[Answer]**自动生成工号

---

#### 关于微服务数据库

**[Question 20.1]** 微服务架构下的数据库设计？
- 每个微服务使用独立的数据库？
- 还是所有服务共享一个数据库？

**[Answer]** 共享一个 MySQL 数据库（前后端2服务架构，后端服务访问数据库）

**[Question 20.2]** 如果使用独立数据库，跨服务的数据查询如何处理？
- 例如：订单服务需要查询员工信息和产品信息

**[Answer]**共享一个数据库

---

#### 关于部署方式

**[Question 21.1]** 您选择了"本地部署"，请明确：
- 是否指直接在物理服务器或虚拟机上运行？
- 微服务架构下，每个服务如何部署？（独立进程、独立服务器？）

**[Answer]**几个服务不同端口

**[Question 21.2]** 是否需要进程管理工具？
- 例如：systemd、Supervisor、PM2

**[Answer]**不需要

---

#### 关于 JWT 配置

**[Question 22.1]** JWT 配置细节？
- Token 有效期：24 小时（与会话有效期一致）？
- 是否需要 Refresh Token？
- JWT 密钥如何管理？（环境变量、配置文件？）

**[Answer]**是的；不需要；环境变量

**[Question 22.2]** JWT 存储位置？
- 前端将 JWT 存储在哪里？（localStorage、sessionStorage、Cookie？）

**[Answer]**Cookie

---

#### 关于图片上传

**[Question 23.1]** 图片上传限制？
- 除了 1MB 大小限制，是否需要限制图片尺寸（如最大宽度、高度）？
- 是否需要验证图片格式（虽然您说格式不限，但是否需要排除某些格式）？

**[Answer]**不需要；不需要

**[Question 23.2]** 图片存储路径？
- 本地文件系统的存储路径？（如 /uploads/products/）
- 图片文件命名规则？（UUID、时间戳、原文件名？）

**[Answer]**/uploads/image/；uuid

---

#### 关于示例产品数据

**[Question 24.1]** 9 个示例产品的类型和价格范围？
- 请提供一些指导，例如：
  - 低价产品（100-500 积分）：3 个
  - 中价产品（500-1000 积分）：3 个
  - 高价产品（1000-2000 积分）：3 个
- 或者您有其他偏好？

**[Answer]**按示例来

---

#### 关于数据验证

**[Question 25.1]** 您回答"不需要"数据验证策略，但为了系统安全和数据完整性，建议至少在后端进行基本验证。请确认：
- 是否完全不需要任何验证？
- 还是只是不需要复杂的验证库，使用简单的手动验证即可？

**[Answer]**简单的手动验证即可

---

#### 关于日志存储

**[Question 26.1]** 您选择将应用日志存储在数据库中，请明确：
- 是否需要单独的日志表？
- 日志表结构？（时间、级别、消息、来源、用户等）
- 日志保留策略？（永久保留、定期清理？）

**[Answer]**单独的日志表；时间、级别、消息、来源、用户；永久保留

---

### 追加问题 - 第二轮（最后一轮）

#### 关于微服务划分

**[Question 27.1]** 您提到只划分为"员工服务、管理员服务"，但这样划分可能不够清晰。请明确：
- 员工服务包含哪些功能？（员工登录、产品浏览、积分查询、订单管理？）
- 管理员服务包含哪些功能？（管理员登录、产品管理、员工管理、积分管理、订单审核？）
- 产品、积分、订单等核心业务逻辑放在哪个服务？

**[Answer]** 微服务按前后端分配，仅2个服务：前端服务 + 后端服务。员工账号与管理员账号放一个表，仅权限不同（employee/admin二选一）。所有业务逻辑在后端服务中，通过权限控制访问。

---

#### 关于 API 网关

**[Question 28.1]** 您提到"管理员端需要网关，员工端不需要"，请明确：
- 为什么管理员端需要网关而员工端不需要？
- 如果员工端不需要网关，员工如何访问后端服务？（直接访问服务端口？）
- API 网关使用什么技术？（Kong、Traefik、自己实现？）

**[Answer]** 基于新的架构（前端+后端2个服务），不需要API网关。前端直接访问后端API，通过JWT权限控制访问。

---

#### 关于前端构建

**[Question 29.1]** 您选择了 Webpack + Ant Design，但前端是原生 JavaScript。请明确：
- 是否使用 React/Vue 来配合 Ant Design？（Ant Design 主要是为 React 设计的）
- 还是使用 Ant Design 的 CSS 样式 + 原生 JavaScript？
- 如果使用原生 JavaScript，如何集成 Ant Design 组件？

**[Answer]** 使用 Ant Design 的 CSS 样式 + 原生 JavaScript。通过 Webpack 打包，引入 Ant Design 的样式文件，使用其 CSS 类名来实现 UI 效果。

---

#### 关于工号生成

**[Question 30.1]** 工号每天从 001 开始，如果一天内创建超过 999 个员工怎么办？
- 是否需要扩展到 4 位（0001）？
- 还是限制每天最多创建 999 个员工？

**[Answer]** 限制每天最多创建 999 个员工，超过则返回错误提示。

---

#### 关于 JWT 存储

**[Question 31.1]** 您提到 JWT 存储在 Cookie 中，请明确：
- Cookie 的属性设置？（HttpOnly、Secure、SameSite？）
- Cookie 的过期时间？（24 小时？）

**[Answer]** HttpOnly=true, Secure=false（本地开发）, SameSite=Lax；过期时间24小时。

---

#### 关于前端状态管理

**[Question 32.1]** 您提到使用 localStorage 管理状态，但 JWT 存储在 Cookie 中。请明确：
- localStorage 用于存储什么数据？（用户信息、产品列表缓存？）
- 用户登录状态如何判断？（从 Cookie 读取 JWT？）

**[Answer]** localStorage 存储用户基本信息（工号、姓名、权限）用于页面展示。登录状态通过 Cookie 中的 JWT 判断，每次 API 请求自动携带。

---

#### 关于数据库表设计

**[Question 33.1]** 共享数据库的情况下，表的命名规则？
- 是否需要按服务划分表前缀？（如 employee_users、admin_users？）
- 还是统一命名？（如 users、products？）

**[Answer]** 统一命名，不需要前缀。表名：users（员工和管理员）、products、orders、point_logs、audit_logs、app_logs。

---

#### 关于审计日志表

**[Question 34.1]** 审计日志表的"操作前后的数据"如何存储？
- JSON 字符串？
- 单独的字段？
- 只记录变更的字段？

**[Answer]** JSON 字符串格式存储，包含操作前后的完整数据。

---

#### 关于应用日志表

**[Question 35.1]** 应用日志表和审计日志表是否是同一个表？
- 如果是不同的表，它们的区别是什么？
- 应用日志记录系统运行日志（如错误、警告）
- 审计日志记录用户操作日志

**[Answer]** 不同的表。app_logs 记录系统运行日志（错误、警告、信息等）；audit_logs 记录用户操作日志（谁在什么时间做了什么操作）。

---

#### 关于 Docker Compose

**[Question 36.1]** 您提到需要 Docker Compose 用于本地开发，请明确：
- Docker Compose 包含哪些服务？（MySQL、各个微服务？）
- 生产环境是否也使用 Docker？（您之前说本地部署，不使用 Docker）

**[Answer]** Docker Compose 仅用于本地开发环境，包含：MySQL、后端服务、前端服务。生产环境直接部署，不使用 Docker。

---

#### 关于单元测试

**[Question 37.1]** 您提到需要单元测试，请明确：
- 使用什么测试框架？（Go 的 testing 包、testify、ginkgo？）
- 测试覆盖率要求？（如 80%？）
- 是否需要 Mock 数据库？

**[Answer]** 使用 Go 标准 testing 包 + testify 库。测试覆盖率目标 60%。需要 Mock 数据库（使用 sqlmock）。

---

#### 关于种子数据

**[Question 38.1]** 种子数据包含哪些内容？
- admin 管理员账号
- 9 个示例产品
- 示例员工账号？
- 其他？

**[Answer]** 包含：1个 admin 管理员账号（工号：admin，密码：123456）+ 9 个示例产品。不需要示例员工账号。

---

#### 关于密码哈希

**[Question 39.1]** 您回答"随意"选择密码哈希算法，我建议使用 bcrypt（Go 标准且安全）。请确认是否同意？

**[Answer]** 同意使用 bcrypt。

---

#### 关于错误码

**[Question 40.1]** 错误响应格式中的 "code" 字段，请明确：
- 错误码的命名规则？（如 USER_NOT_FOUND、INVALID_PASSWORD？）
- 是否需要定义错误码常量？
- 错误码是否需要文档化？

**[Answer]** 使用大写下划线命名（如 USER_NOT_FOUND、INVALID_PASSWORD、INSUFFICIENT_POINTS）。需要定义错误码常量。需要在 API 文档中列出所有错误码。

---

## 下一步行动

完成以上问题的回答后，我将：
1. 基于您的回答创建详细的设计文档（design.md）
2. 包含系统架构图、数据库 ER 图、API 接口定义
3. 包含前端页面结构和组件设计
4. 包含部署架构图
5. 提交给您审查和批准

---

---

### 追加问题 - 第三轮

#### 关于前后端服务部署

**[Question 41.1]** 前端服务和后端服务的部署方式？
- 前端服务：是否是静态文件服务器（如 Nginx 托管静态 HTML/CSS/JS）？
- 后端服务：Go 应用监听端口（如 8080）？
- 前端如何访问后端？（同域名不同路径、不同端口、不同域名？）

**[Answer]**前端服务：node服务，端口8000；后端应用端口8080；localhost:8080

---

#### 关于管理员账号工号

**[Question 42.1]** 管理员账号的工号格式？
- 您提到员工工号格式为 20260114-001
- 管理员账号的工号是 "admin" 还是也遵循日期格式？
- 如果是 "admin"，是否与员工工号格式冲突？

**[Answer]**仅初始的管理员admin不遵循规则，其他的遵循规则

---

#### 关于前端路由

**[Question 43.1]** 前端路由方式？
- 使用 Hash 路由（#/products）？
- 使用 History 路由（/products）？
- 还是多页面应用（每个页面独立的 HTML 文件）？

**[Answer]**使用 History 路由

---

#### 关于图片访问路径

**[Question 44.1]** 您提到图片通过 API 代理访问，请明确：
- API 路径示例：GET /api/images/{filename}？
- 图片存储在后端服务器的 /uploads/image/ 目录？
- 前端如何显示图片？（<img src="/api/images/xxx.jpg">？）

**[Answer]**API 路径示例：GET /images/{filename}？；是的；是的

---

#### 关于订单状态流转

**[Question 45.1]** 订单状态流转规则？
- pending（待审核）→ approved（已通过）或 rejected（已拒绝）
- 是否可以从 approved 或 rejected 状态再次修改？
- 拒绝订单后，积分是否退还？

**[Answer]**是的；不能；立即退回

---

#### 关于积分发放和扣除

**[Question 46.1]** 管理员手动发放/扣除积分的场景？
- 是否需要填写原因/备注？
- 是否需要审批流程？
- 还是管理员直接操作即可？

**[Answer]**需要；不需要；是的

---

#### 关于产品库存

**[Question 47.1]** 产品是否有库存限制？
- 需求文档中未提及库存，是否意味着产品无限量供应？
- 还是需要添加库存字段，兑换时扣减库存？

**[Answer]**不需要库存

---

#### 关于并发控制

**[Question 48.1]** 兑换产品时的并发控制？
- 如果多个员工同时兑换同一产品（假设有库存限制），如何处理？
- 如果员工积分不足但同时发起多个兑换请求，如何处理？
- 是否需要乐观锁或悲观锁？

**[Answer]**无库存，都兑换成功；兑换失败；乐观锁

---

#### 关于前端构建产物

**[Question 49.1]** 前端构建后的产物？
- Webpack 打包后生成的文件结构？（如 dist/index.html, dist/js/bundle.js, dist/css/style.css）
- 是否需要代码分割（code splitting）？
- 是否需要压缩和混淆？

**[Answer]**dist/index.html；不需要；不需要

---

#### 关于环境配置

**[Question 50.1]** 环境配置管理？
- 后端配置（数据库连接、JWT密钥等）如何管理？（.env 文件、配置文件、环境变量？）
- 前端配置（API 地址等）如何管理？
- 是否需要区分开发环境和生产环境配置？

**[Answer]**.env ;写死地址；不需要

---

### 追加问题 - 第四轮（最终确认）

#### 关于前端服务技术栈

**[Question 51.1]** 您提到前端服务是 Node 服务（端口8000），但之前说使用原生 JavaScript + Webpack。请明确：
- Node 服务是用来做什么的？（托管静态文件？还是 SSR？）
- 还是说前端使用 Express/Koa 等框架来托管 Webpack 打包后的静态文件？
- 还是直接使用 webpack-dev-server 用于开发，生产环境使用 Nginx？

**[Answer]**

---

#### 关于跨域问题

**[Question 52.1]** 前端（localhost:8000）访问后端（localhost:8080）会有跨域问题，如何处理？
- 后端配置 CORS？
- 前端配置代理（proxy）？
- 还是其他方式？

**[Answer]**

---

#### 关于并发控制的乐观锁

**[Question 53.1]** 您提到使用乐观锁处理积分并发问题，请明确：
- 是否在 users 表添加 version 字段？
- 更新积分时检查 version 是否变化？
- 如果并发冲突，如何提示用户？

**[Answer]**

---

#### 关于管理员创建

**[Question 54.1]** 您提到初始管理员工号为 "admin"，其他管理员遵循日期格式。请明确：
- 是否允许创建新的管理员账号？
- 如果允许，谁可以创建？（只有 admin 可以？还是所有管理员都可以？）
- 新管理员的工号格式是 20260114-001 这样吗？如何区分员工和管理员的工号？

**[Answer]**

---

#### 关于前端 History 路由

**[Question 55.1]** 使用 History 路由需要服务器配置支持，请明确：
- Node 服务如何配置？（所有路由都返回 index.html？）
- 刷新页面时如何处理？

**[Answer]**

---

**请您回答以上问题，这是最后一轮确认。回答完成后，我将立即创建完整的设计文档。**
